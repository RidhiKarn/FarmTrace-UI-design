<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FarmTrace - Blockchain Agricultural Supply Chain Platform</title>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2d5a27 0%, #4a7c59 100%);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
        }

        .language-voice-controls {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .language-selector {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 8px 12px;
            color: #333;
            font-size: 14px;
            cursor: pointer;
        }

        .language-selector option {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: 5px;
        }

        .voice-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 8px 12px;
            color: white;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .voice-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .voice-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-left: 5px;
        }

        .voice-btn:hover {
            background: #218838;
        }

        /* Marketplace Styles */
        .marketplace-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .marketplace-card {
            border: 1px solid #dee2e6;
            border-radius: 10px;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .marketplace-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .card-header {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 15px;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-header h4 {
            margin: 0;
            font-size: 1.2em;
        }

        .rating {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        .card-content {
            padding: 20px;
        }

        .card-content p {
            margin: 8px 0;
            font-size: 0.95em;
        }

        .card-content strong {
            color: #495057;
        }

        .card-actions {
            padding: 15px 20px;
            border-top: 1px solid #f8f9fa;
            display: flex;
            gap: 10px;
        }

        .card-actions .btn {
            flex: 1;
            padding: 10px;
            text-align: center;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #1e7e34;
        }

        .header h1 { font-size: 2.5em; margin-bottom: 10px; }

        .demo-banner {
            background: #ffc107;
            color: #212529;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
        }

        .user-selector {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .user-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .user-card {
            background: white;
            border: 3px solid #dee2e6;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .user-card.active {
            border-color: #2d5a27;
            background: #2d5a27;
            color: white;
            transform: scale(1.05);
        }

        .user-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .user-emoji { font-size: 2em; margin-bottom: 8px; }
        .user-title { font-weight: bold; font-size: 14px; }
        .user-name { font-size: 12px; opacity: 0.8; }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            padding: 20px;
        }

        .info-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            height: fit-content;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        .stat-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-size: 12px;
        }

        .stat-number { font-size: 1.5em; font-weight: bold; }

        .functions-panel {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            overflow: hidden;
        }

        .function-tabs {
            display: flex;
            background: #f8f9fa;
            flex-wrap: wrap;
        }

        .function-tab {
            padding: 12px 16px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 13px;
            color: #6c757d;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .function-tab.active {
            color: #2d5a27;
            border-bottom-color: #2d5a27;
            background: white;
        }

        .function-content {
            padding: 20px;
            min-height: 500px;
        }

        .demo-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .demo-title {
            font-weight: bold;
            color: #2d5a27;
            margin-bottom: 10px;
        }

        .input-group {
            margin: 10px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 13px;
        }

        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 13px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
            margin: 5px 5px 5px 0;
            transition: all 0.3s ease;
        }

        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-warning { background: #ffc107; color: #212529; }
        .btn-info { background: #17a2b8; color: white; }
        .btn-danger { background: #dc3545; color: white; }

        .btn:hover { transform: translateY(-1px); box-shadow: 0 3px 10px rgba(0,0,0,0.2); }

        .result-box {
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }

        .success-box { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .info-box { background: #e7f3ff; border: 1px solid #b3d9ff; color: #004085; }
        .warning-box { background: #fff3cd; border: 1px solid #ffeeba; color: #856404; }
        .danger-box { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }

        .ai-analysis {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 13px;
        }

        .blockchain-info {
            background: #212529;
            color: #28a745;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 11px;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            padding: 8px;
            margin: 5px 0;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #dee2e6;
        }

        .step-indicator {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            margin-right: 10px;
        }

        .step-completed { background: #28a745; color: white; }
        .step-progress { background: #ffc107; color: white; }
        .step-pending { background: #6c757d; color: white; }

        .qr-demo {
            text-align: center;
            margin: 15px 0;
        }

        .qr-placeholder {
            width: 120px;
            height: 120px;
            background: #333;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px auto;
            border-radius: 8px;
            font-size: 12px;
            font-weight: bold;
        }

        .live-demo {
            border: 2px dashed #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            background: #fffbf0;
        }

        .live-demo::before {
            content: "üî¥ LIVE DEMO";
            color: #dc3545;
            font-weight: bold;
            font-size: 12px;
        }

        /* Enhanced styling for new components */
        .price-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 15px 0;
        }

        .current-system, .farmtrace-system {
            padding: 15px;
            border-radius: 8px;
            border: 2px solid;
        }

        .current-system {
            background: #fff5f5;
            border-color: #e53e3e;
        }

        .farmtrace-system {
            background: #f0fff4;
            border-color: #38a169;
        }

        .loss-highlight {
            color: #e53e3e;
            font-weight: bold;
            font-size: 16px;
        }

        .profit-highlight {
            color: #38a169;
            font-weight: bold;
            font-size: 16px;
        }

        .profit-summary {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid #4299e1;
        }

        .scanning-animation {
            padding: 20px;
            text-align: center;
            font-size: 18px;
            color: #4299e1;
            background: #ebf8ff;
            border-radius: 8px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .product-details, .verification-status, .pricing-transparency {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }

        .authenticity-score {
            background: #d4edda;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            color: #155724;
            font-weight: bold;
        }

        .timeline-container {
            margin: 20px 0;
        }

        .timeline-item {
            display: flex;
            align-items: flex-start;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            position: relative;
        }

        .timeline-item.completed {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }

        .step-indicator {
            background: #28a745;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .timeline-content h4 {
            margin: 0 0 8px 0;
            color: #2d5a27;
        }

        .blockchain-hash {
            font-family: monospace;
            font-size: 12px;
            color: #6c757d;
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
            margin-top: 8px;
        }

        .traceability-summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .impact-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .metric {
            text-align: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 8px;
        }

        .metric-value {
            display: block;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            display: block;
            font-size: 12px;
            opacity: 0.9;
        }

        .verification-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .verification-item {
            display: flex;
            align-items: flex-start;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px solid #dee2e6;
        }

        .verification-item.verified {
            background: #d4edda;
            border-color: #28a745;
        }

        .verification-item.pending {
            background: #fff3cd;
            border-color: #ffc107;
        }

        .verification-item .icon {
            font-size: 24px;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .verification-item .details h4 {
            margin: 0 0 8px 0;
            color: #2d5a27;
        }

        .verification-item .status {
            font-weight: bold;
            margin: 5px 0;
        }

        .verification-item .detail {
            font-size: 14px;
            color: #6c757d;
            margin: 2px 0;
        }

        .kyc-benefits, .cost-savings {
            margin: 20px 0;
            padding: 15px;
            background: #e8f4f8;
            border-radius: 10px;
            border-left: 4px solid #17a2b8;
        }

        .benefit-item {
            margin: 8px 0;
            padding-left: 20px;
            color: #155724;
        }

        .traceability-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .efficiency-note {
            color: #28a745;
            font-weight: bold;
            margin-top: 5px;
        }

        .kyc-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .processing-time {
            color: #17a2b8;
            font-weight: bold;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .dashboard { grid-template-columns: 1fr; }
            .user-grid { grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); }
            .price-comparison {
                grid-template-columns: 1fr;
            }
            .impact-metrics {
                grid-template-columns: repeat(2, 1fr);
            }
            .verification-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="language-voice-controls">
                <select id="languageSelector" class="language-selector" onchange="changeLanguage()">
                    <option value="en">English</option>
                    <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                    <option value="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü (Odia)</option>
                </select>
                <button id="voiceToggle" class="voice-toggle" onclick="toggleVoiceMode()">üé§ Voice</button>
            </div>
            <h1 data-translate="app_title">üåæ FarmTrace</h1>
            <p data-translate="app_subtitle"><strong>Blockchain-Based Agricultural Supply Chain Platform</strong></p>
            <p data-translate="app_organization">Government of Odisha ‚Ä¢ Electronics & IT Department</p>
        </div>

        <div class="demo-banner" data-translate="demo_banner">
            üåæ Complete Agricultural Ecosystem ‚Ä¢ All Stakeholders Connected ‚Ä¢ Live Blockchain Integration
        </div>

        <div class="user-selector">
            <h3>Select User Type to Experience Complete Functionality:</h3>
            <div class="user-grid" id="userGrid">
                <!-- Users will be populated by JavaScript -->
            </div>
        </div>

        <div class="dashboard" id="dashboard">
            <div class="info-panel" id="infoPanel">
                <!-- User info will be populated by JavaScript -->
            </div>

            <div class="functions-panel" id="functionsPanel">
                <!-- Functions will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        const users = {
            FARMER: {
                emoji: 'üë®‚Äçüåæ',
                title: 'FARMER',
                name: 'Prakash Jena', // Real MOSPI farmer profile
                role: 'KCC Holder Farmer',
                location: 'Khordha District, Odisha', // Actual MOSPI survey location
                stats: {
                    'Farm Size': '1.08 hectares', // MOSPI average
                    'Annual Income': '‚Çπ77,112', // MOSPI data
                    'Debt Status': '‚Çπ50,300', // MOSPI average debt
                    'KCC Status': 'Active'
                },
                functions: {
                    'Registration & KYC': {
                        description: 'Complete farmer registration with AI-powered KYC verification',
                        content: `
                            <div class="live-demo">
                                <h3 data-translate="farmer_registration_title">üåæ Complete Farmer Registration</h3>

                                <div class="input-group">
                                    <label data-translate="full_name_label">Full Name</label>
                                    <input type="text" data-translate-placeholder="full_name_placeholder" placeholder="Enter your full name">
                                    <button class="voice-btn" onclick="startVoiceInput(this.previousElementSibling, 'name')">üé§</button>
                                </div>

                                <div class="input-group">
                                    <label data-translate="phone_label">Phone Number</label>
                                    <input type="tel" data-translate-placeholder="phone_placeholder" placeholder="Enter 10-digit phone number">
                                    <button class="voice-btn" onclick="startVoiceInput(this.previousElementSibling, 'phone')">üé§</button>
                                </div>

                                <div class="input-group">
                                    <label data-translate="email_label">Email Address</label>
                                    <input type="email" data-translate-placeholder="email_placeholder" placeholder="Enter your email address">
                                    <button class="voice-btn" onclick="startVoiceInput(this.previousElementSibling, 'email')">üé§</button>
                                </div>

                                <div class="input-group">
                                    <label data-translate="aadhaar_label">Aadhaar Number</label>
                                    <input type="text" maxlength="12" data-translate-placeholder="aadhaar_placeholder" placeholder="Enter 12-digit Aadhaar number">
                                    <button class="voice-btn" onclick="startVoiceInput(this.previousElementSibling, 'aadhaar')">üé§</button>
                                </div>

                                <div class="input-group">
                                    <label data-translate="pan_label">PAN Card Number</label>
                                    <input type="text" maxlength="10" data-translate-placeholder="pan_placeholder" placeholder="Enter PAN card number">
                                    <button class="voice-btn" onclick="startVoiceInput(this.previousElementSibling, 'pan')">üé§</button>
                                </div>

                                <div class="input-group">
                                    <label data-translate="farm_location_label">Farm Location</label>
                                    <input type="text" data-translate-placeholder="farm_location_placeholder" placeholder="Village, District, State">
                                    <button class="voice-btn" onclick="startVoiceInput(this.previousElementSibling, 'location')">üé§</button>
                                </div>

                                <div class="input-group">
                                    <label data-translate="farm_size_label">Farm Size (in acres)</label>
                                    <input type="number" step="0.1" data-translate-placeholder="farm_size_placeholder" placeholder="Enter farm size in acres">
                                    <button class="voice-btn" onclick="startVoiceInput(this.previousElementSibling, 'size')">üé§</button>
                                </div>

                                <div class="input-group">
                                    <label data-translate="bank_account_label">Bank Account Number</label>
                                    <input type="text" data-translate-placeholder="bank_account_placeholder" placeholder="Enter bank account number">
                                    <button class="voice-btn" onclick="startVoiceInput(this.previousElementSibling, 'bank')">üé§</button>
                                </div>

                                <div class="input-group">
                                    <label data-translate="ifsc_label">IFSC Code</label>
                                    <input type="text" maxlength="11" data-translate-placeholder="ifsc_placeholder" placeholder="Enter IFSC code">
                                    <button class="voice-btn" onclick="startVoiceInput(this.previousElementSibling, 'ifsc')">üé§</button>
                                </div>

                                <div class="input-group">
                                    <label data-translate="crop_types_label">Primary Crop Types</label>
                                    <select data-translate="crop_types_select">
                                        <option data-translate="select_crops">Select primary crops</option>
                                        <option data-translate="rice">Rice</option>
                                        <option data-translate="wheat">Wheat</option>
                                        <option data-translate="tomato">Tomato</option>
                                        <option data-translate="onion">Onion</option>
                                        <option data-translate="potato">Potato</option>
                                        <option data-translate="cotton">Cotton</option>
                                    </select>
                                </div>

                                <div class="input-group">
                                    <label data-translate="farming_type_label">Farming Type</label>
                                    <select data-translate="farming_type_select">
                                        <option data-translate="select_farming_type">Select farming type</option>
                                        <option data-translate="organic">Organic Farming</option>
                                        <option data-translate="conventional">Conventional Farming</option>
                                        <option data-translate="mixed">Mixed Farming</option>
                                    </select>
                                </div>

                                <div class="input-group">
                                    <label data-translate="upload_aadhaar_label">Upload Aadhaar Card</label>
                                    <input type="file" accept="image/*,application/pdf" onchange="simulateKYC()">
                                </div>

                                <div class="input-group">
                                    <label data-translate="upload_pan_label">Upload PAN Card</label>
                                    <input type="file" accept="image/*,application/pdf">
                                </div>

                                <div class="input-group">
                                    <label data-translate="upload_land_label">Upload Land Records</label>
                                    <input type="file" accept="image/*,application/pdf">
                                </div>

                                <button class="btn btn-primary" onclick="simulateKYC()" data-translate="submit_registration">Submit for AI Verification</button>
                                <div id="kyc-result"></div>
                            </div>
                        `
                    },
                    'AI Price Analysis': {
                        description: 'Upload produce photos for AI-powered price recommendations',
                        content: `
                            <div class="live-demo">
                                <div class="input-group">
                                    <label>Upload Produce Photo</label>
                                    <input type="file" accept="image/*" onchange="analyzePrice()">
                                </div>
                                <div class="input-group">
                                    <label>Product Details</label>
                                    <select>
                                        <option>Organic Tomatoes - 500kg</option>
                                        <option>Red Onions - 300kg</option>
                                        <option>Potatoes - 800kg</option>
                                    </select>
                                </div>
                                <button class="btn btn-info" onclick="analyzePrice()">Get AI Price Recommendation</button>
                                <div id="price-analysis"></div>
                            </div>
                        `
                    },
                    'Harvest Recording': {
                        description: 'Record harvest and create blockchain-verified product batches',
                        content: `
                            <div class="live-demo">
                                <div class="input-group">
                                    <label>Product Name</label>
                                    <input type="text" placeholder="Enter product name">
                                </div>
                                <div class="input-group">
                                    <label>Quantity (kg)</label>
                                    <input type="number" placeholder="500">
                                </div>
                                <div class="input-group">
                                    <label>Quality Grade</label>
                                    <select><option>Grade A</option><option>Grade B</option></select>
                                </div>
                                <button class="btn btn-success" onclick="createBatch()">Create Batch & Generate QR</button>
                                <div id="batch-result"></div>
                            </div>
                        `
                    },
                    'Payment Monitoring': {
                        description: 'Track all payments and transaction history',
                        content: `
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-number">‚Çπ22,750</div>
                                    <div>Last Payment</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number">15</div>
                                    <div>Transactions</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="step-indicator step-completed">‚úì</div>
                                <div>
                                    <strong>Payment Received:</strong> ‚Çπ22,750 from Amit Trader<br>
                                    <small>Product: Tomatoes 500kg ‚Ä¢ Status: Completed</small>
                                </div>
                            </div>
                            <div class="blockchain-info">
                                Transaction Hash: 0xd4e5f6789012345...ab2c3<br>
                                Block: #12848 ‚Ä¢ Confirmations: 12
                            </div>
                        `
                    },
                    'Market Price Alerts': {
                        description: 'Receive real-time market price alerts and trends',
                        content: `
                            <div class="timeline-item">
                                <div class="step-indicator step-progress">üîî</div>
                                <div>
                                    <strong>Price Alert:</strong> Tomato prices ‚Üó 8% today<br>
                                    <small>Current: ‚Çπ45.50/kg ‚Ä¢ Trend: Rising</small>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="step-indicator step-completed">üìà</div>
                                <div>
                                    <strong>Market Update:</strong> High demand for organic produce<br>
                                    <small>Premium pricing available ‚Ä¢ Act within 2 days</small>
                                </div>
                            </div>
                            <button class="btn btn-info">Subscribe to More Alerts</button>
                        `
                    },
                    'Find Middleman': {
                        description: 'Browse available middlemen in your area and compare offers',
                        content: `
                            <div class="live-demo">
                                <h3 data-translate="find_middleman_title">üîç Find Middleman in Your Area</h3>

                                <div class="input-group">
                                    <label data-translate="product_type_label">Product Type</label>
                                    <select id="productFilter" onchange="filterMiddlemen()">
                                        <option value="all">All Products</option>
                                        <option value="tomato">Tomatoes</option>
                                        <option value="onion">Onions</option>
                                        <option value="rice">Rice</option>
                                        <option value="wheat">Wheat</option>
                                    </select>
                                </div>

                                <div class="input-group">
                                    <label data-translate="quantity_label">Your Quantity (kg)</label>
                                    <input type="number" id="farmerQuantity" placeholder="Enter quantity" onchange="filterMiddlemen()">
                                </div>

                                <div id="middlemen-list" class="marketplace-grid">
                                    <div class="marketplace-card">
                                        <div class="card-header">
                                            <h4>üè¢ Amit Trader</h4>
                                            <span class="rating">‚≠ê 4.8/5</span>
                                        </div>
                                        <div class="card-content">
                                            <p><strong>Location:</strong> Bhubaneswar Market, 12km</p>
                                            <p><strong>Speciality:</strong> Tomatoes, Onions</p>
                                            <p><strong>Current Rate:</strong> ‚Çπ42-45/kg</p>
                                            <p><strong>Min Quantity:</strong> 100kg</p>
                                            <p><strong>Transport:</strong> Provided</p>
                                        </div>
                                        <div class="card-actions">
                                            <button class="btn btn-primary" onclick="contactMiddleman('Amit Trader')">Contact</button>
                                            <button class="btn btn-success" onclick="sendQuote('Amit Trader')">Send Quote</button>
                                        </div>
                                    </div>

                                    <div class="marketplace-card">
                                        <div class="card-header">
                                            <h4>üè™ Rajesh Wholesale</h4>
                                            <span class="rating">‚≠ê 4.6/5</span>
                                        </div>
                                        <div class="card-content">
                                            <p><strong>Location:</strong> Cuttack Mandi, 18km</p>
                                            <p><strong>Speciality:</strong> Rice, Wheat, Pulses</p>
                                            <p><strong>Current Rate:</strong> ‚Çπ38-42/kg</p>
                                            <p><strong>Min Quantity:</strong> 200kg</p>
                                            <p><strong>Transport:</strong> Self arrangement</p>
                                        </div>
                                        <div class="card-actions">
                                            <button class="btn btn-primary" onclick="contactMiddleman('Rajesh Wholesale')">Contact</button>
                                            <button class="btn btn-success" onclick="sendQuote('Rajesh Wholesale')">Send Quote</button>
                                        </div>
                                    </div>

                                    <div class="marketplace-card">
                                        <div class="card-header">
                                            <h4>üöö Srinivas Export</h4>
                                            <span class="rating">‚≠ê 4.9/5</span>
                                        </div>
                                        <div class="card-content">
                                            <p><strong>Location:</strong> Paradip Port, 25km</p>
                                            <p><strong>Speciality:</strong> Export Quality</p>
                                            <p><strong>Current Rate:</strong> ‚Çπ48-52/kg</p>
                                            <p><strong>Min Quantity:</strong> 500kg</p>
                                            <p><strong>Transport:</strong> Provided + Cold storage</p>
                                        </div>
                                        <div class="card-actions">
                                            <button class="btn btn-primary" onclick="contactMiddleman('Srinivas Export')">Contact</button>
                                            <button class="btn btn-success" onclick="sendQuote('Srinivas Export')">Send Quote</button>
                                        </div>
                                    </div>
                                </div>

                                <div id="contact-result"></div>
                            </div>
                        `
                    }
                }
            },
            MIDDLEMAN: {
                emoji: 'üè¢', title: 'MIDDLEMAN', name: 'Amit Trader',
                role: 'Licensed Agricultural Trader', location: 'Bhubaneswar Market Yard',
                stats: { 'License': 'TRD001234', 'Capacity': '1000kg', 'Inventory': '750kg', 'Turnover': '‚Çπ2.5L/month' },
                functions: {
                    'Product Authenticity': {
                        description: 'Verify product authenticity using blockchain QR codes',
                        content: `
                            <div class="live-demo">
                                <div class="qr-demo">
                                    <div class="qr-placeholder">QR SCANNER</div>
                                    <button class="btn btn-primary" onclick="scanQR('middleman')">Scan Product QR Code</button>
                                </div>
                                <div id="authenticity-result"></div>
                            </div>
                        `
                    },
                    'Purchase Recording': {
                        description: 'Record purchases from farmers with smart contracts',
                        content: `
                            <div class="live-demo">
                                <div class="input-group">
                                    <label>Select Farmer</label>
                                    <select>
                                        <option>Rajesh Kumar - Village Khetpur (Organic Certified)</option>
                                        <option>Other Verified Farmers</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label>Product & Quantity</label>
                                    <input type="text" value="Organic Tomatoes - 500kg" readonly>
                                </div>
                                <div class="input-group">
                                    <label>Purchase Price per kg</label>
                                    <input type="number" value="45.50">
                                </div>
                                <button class="btn btn-success" onclick="recordPurchase()">Record Purchase & Pay</button>
                                <div id="purchase-result"></div>
                            </div>
                        `
                    },
                    'Inventory Tracking': {
                        description: 'Real-time inventory management with storage conditions',
                        content: `
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-number">500kg</div>
                                    <div>Tomatoes</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number">250kg</div>
                                    <div>Onions</div>
                                </div>
                            </div>
                            <div class="ai-analysis">
                                <strong>üå°Ô∏è Storage Conditions</strong><br>
                                Temperature: 18¬∞C (Optimal)<br>
                                Humidity: 65% (Good)<br>
                                Quality Status: All products Grade A<br>
                                Alert: Tomatoes expire in 3 days
                            </div>
                            <button class="btn btn-warning" onclick="updateInventory()">Update Stock Levels</button>
                            <div id="inventory-result"></div>
                        `
                    },
                    'Browse Farmers': {
                        description: 'Find available farmers in your area and compare produce offers',
                        content: `
                            <div class="live-demo">
                                <h3 data-translate="browse_farmers_title">üåæ Browse Available Farmers</h3>

                                <div class="input-group">
                                    <label data-translate="product_needed_label">Product Needed</label>
                                    <select id="productNeeded" onchange="filterFarmers()">
                                        <option value="all">All Products</option>
                                        <option value="tomato">Tomatoes</option>
                                        <option value="onion">Onions</option>
                                        <option value="rice">Rice</option>
                                        <option value="wheat">Wheat</option>
                                    </select>
                                </div>

                                <div class="input-group">
                                    <label data-translate="quantity_needed_label">Quantity Needed (kg)</label>
                                    <input type="number" id="quantityNeeded" placeholder="Enter required quantity" onchange="filterFarmers()">
                                </div>

                                <div id="farmers-list" class="marketplace-grid">
                                    <div class="marketplace-card">
                                        <div class="card-header">
                                            <h4>üåæ Rajesh Kumar</h4>
                                            <span class="rating">‚≠ê 4.9/5 (Organic Certified)</span>
                                        </div>
                                        <div class="card-content">
                                            <p><strong>Location:</strong> Village Khetpur, 8km</p>
                                            <p><strong>Available:</strong> Tomatoes (500kg), Onions (300kg)</p>
                                            <p><strong>Price:</strong> ‚Çπ44-48/kg</p>
                                            <p><strong>Quality:</strong> Grade A, Organic</p>
                                            <p><strong>Harvest Date:</strong> 2 days ago</p>
                                        </div>
                                        <div class="card-actions">
                                            <button class="btn btn-primary" onclick="contactFarmer('Rajesh Kumar')">Contact Farmer</button>
                                            <button class="btn btn-success" onclick="makeOffer('Rajesh Kumar')">Make Offer</button>
                                        </div>
                                    </div>

                                    <div class="marketplace-card">
                                        <div class="card-header">
                                            <h4>üåæ Sunita Devi</h4>
                                            <span class="rating">‚≠ê 4.7/5</span>
                                        </div>
                                        <div class="card-content">
                                            <p><strong>Location:</strong> Nayagarh District, 15km</p>
                                            <p><strong>Available:</strong> Rice (800kg), Wheat (400kg)</p>
                                            <p><strong>Price:</strong> ‚Çπ28-32/kg</p>
                                            <p><strong>Quality:</strong> Grade A</p>
                                            <p><strong>Harvest Date:</strong> 1 week ago</p>
                                        </div>
                                        <div class="card-actions">
                                            <button class="btn btn-primary" onclick="contactFarmer('Sunita Devi')">Contact Farmer</button>
                                            <button class="btn btn-success" onclick="makeOffer('Sunita Devi')">Make Offer</button>
                                        </div>
                                    </div>

                                    <div class="marketplace-card">
                                        <div class="card-header">
                                            <h4>üåæ Mohan Patel</h4>
                                            <span class="rating">‚≠ê 4.8/5 (Export Quality)</span>
                                        </div>
                                        <div class="card-content">
                                            <p><strong>Location:</strong> Balasore District, 22km</p>
                                            <p><strong>Available:</strong> Premium Basmati (1000kg)</p>
                                            <p><strong>Price:</strong> ‚Çπ65-75/kg</p>
                                            <p><strong>Quality:</strong> Export Grade</p>
                                            <p><strong>Harvest Date:</strong> Fresh, just harvested</p>
                                        </div>
                                        <div class="card-actions">
                                            <button class="btn btn-primary" onclick="contactFarmer('Mohan Patel')">Contact Farmer</button>
                                            <button class="btn btn-success" onclick="makeOffer('Mohan Patel')">Make Offer</button>
                                        </div>
                                    </div>
                                </div>

                                <div id="farmer-contact-result"></div>
                            </div>
                        `
                    }
                }
            },
            FIELD_AGENT: {
                emoji: 'üîç', title: 'FIELD AGENT', name: 'Priya Sharma',
                role: 'Agricultural Extension Officer', location: 'Khurda District',
                stats: { 'Employee ID': 'AGR_001', 'Farmers': '50 under care', 'Inspections': '12 this month', 'Training': '8 sessions' },
                functions: {
                    'Farm Inspection': {
                        description: 'Conduct digital farm inspections with GPS verification',
                        content: `
                            <div class="live-demo">
                                <div class="input-group">
                                    <label>Inspection Type</label>
                                    <select>
                                        <option>Organic Certification Audit</option>
                                        <option>Quality Assessment</option>
                                        <option>Compliance Check</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label>GPS Location</label>
                                    <input type="text" value="20.2961¬∞N, 85.8245¬∞E - Village Khetpur" readonly>
                                </div>
                                <button class="btn btn-primary" onclick="conductInspection()">Start Digital Inspection</button>
                                <div id="inspection-result"></div>
                            </div>
                        `
                    },
                    'Quality Compliance': {
                        description: 'Verify quality standards and issue compliance certificates',
                        content: `
                            <div class="ai-analysis">
                                <strong>üîç Inspection Report</strong><br>
                                Farm: Rajesh Kumar, Village Khetpur<br>
                                Crop: Organic Tomatoes<br>
                                Soil Test: No chemical residue<br>
                                Quality Grade: A (96% score)<br>
                                Recommendation: Approve organic certification
                            </div>
                            <button class="btn btn-success" onclick="approveCompliance()">Approve Compliance</button>
                            <div id="compliance-result"></div>
                        `
                    }
                }
            },
            TRANSPORTER: {
                emoji: 'üöö', title: 'TRANSPORTER', name: 'Ravi Transport',
                role: 'Licensed Goods Transporter', location: 'Bhubaneswar-Cuttack Route',
                stats: { 'Vehicle': 'Tempo (1000kg)', 'License': 'TR123456', 'Current Load': '500kg', 'Rating': '4.9/5' },
                functions: {
                    'GPS Tracking': {
                        description: 'Real-time GPS tracking with condition monitoring',
                        content: `
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-number">20.3156¬∞N</div>
                                    <div>Latitude</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number">85.8421¬∞E</div>
                                    <div>Longitude</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="step-indicator step-progress">üöö</div>
                                <div>
                                    <strong>Current Status:</strong> En route to Sunita Store<br>
                                    <small>Speed: 45 km/h ‚Ä¢ ETA: 1 hour 45 minutes</small>
                                </div>
                            </div>
                            <div class="ai-analysis">
                                Temperature: 18¬∞C (Optimal)<br>
                                Humidity: 65% (Good)<br>
                                Route Efficiency: 95%<br>
                                Product Condition: Excellent
                            </div>
                        `
                    },
                    'Delivery Verification': {
                        description: 'Digital delivery confirmation with photo proof',
                        content: `
                            <div class="live-demo">
                                <div class="input-group">
                                    <label>Delivery Address</label>
                                    <input type="text" value="Sunita Store, Market Complex" readonly>
                                </div>
                                <div class="input-group">
                                    <label>Upload Delivery Photo</label>
                                    <input type="file" accept="image/*">
                                </div>
                                <div class="input-group">
                                    <label>Receiver Signature</label>
                                    <input type="text" placeholder="Digital signature">
                                </div>
                                <button class="btn btn-success" onclick="confirmDelivery()">Confirm Delivery</button>
                                <div id="delivery-result"></div>
                            </div>
                        `
                    }
                }
            },
            RETAILER: {
                emoji: 'üè™', title: 'RETAILER', name: 'Sunita Store',
                role: 'Organic Produce Retailer', location: 'Market Complex, Bhubaneswar',
                stats: { 'Store Type': 'Organic Store', 'Daily Footfall': '150', 'Revenue': '‚Çπ75K/month', 'Categories': '8' },
                functions: {
                    'Consumer QR Generation': {
                        description: 'Generate consumer-facing QR codes for traceability',
                        content: `
                            <div class="live-demo">
                                <div class="input-group">
                                    <label>Select Product for QR</label>
                                    <select>
                                        <option>Organic Tomatoes - 500kg</option>
                                        <option>Red Onions - 300kg</option>
                                    </select>
                                </div>
                                <div class="qr-demo">
                                    <div class="qr-placeholder">CONSUMER QR<br>TOMATOES</div>
                                </div>
                                <button class="btn btn-primary" onclick="generateConsumerQR()">Generate Consumer QR</button>
                                <div id="consumer-qr-result"></div>
                            </div>
                        `
                    },
                    'Price Transparency': {
                        description: 'Display complete price breakdown to consumers',
                        content: `
                            <div class="ai-analysis">
                                <strong>üí∞ Transparent Pricing Breakdown</strong><br>
                                Farmer Price: ‚Çπ45.50/kg (78%)<br>
                                Middleman Margin: ‚Çπ6.50/kg (11%)<br>
                                Transport Cost: ‚Çπ2.00/kg (3%)<br>
                                Retailer Margin: ‚Çπ4.00/kg (7%)<br>
                                <strong>Final Price: ‚Çπ58.00/kg</strong>
                            </div>
                            <button class="btn btn-info">Update Display Pricing</button>
                        `
                    }
                }
            },
            CONSUMER: {
                emoji: 'üë•', title: 'CONSUMER', name: 'Priya Consumer',
                role: 'End Consumer', location: 'Bhubaneswar, Odisha',
                stats: { 'Purchases': '25 items', 'Savings': '‚Çπ450', 'Quality Rating': '4.8/5', 'Verifications': '25' },
                functions: {
                    'Product Traceability': {
                        description: 'Complete farm-to-store traceability verification',
                        content: `
                            <div class="live-demo">
                                <div class="qr-demo">
                                    <div class="qr-placeholder">SCAN PRODUCT</div>
                                    <button class="btn btn-primary" onclick="traceProduct()">Scan & Trace Product</button>
                                </div>
                                <div id="trace-result"></div>
                            </div>
                        `
                    },
                    'Quality Verification': {
                        description: 'Blockchain-verified quality and certification claims',
                        content: `
                            <div class="success-box result-box">
                                <strong>‚úÖ Quality Verified on Blockchain</strong><br>
                                Product: Organic Tomatoes<br>
                                Grade: A (Field Agent Verified)<br>
                                Organic Certificate: Valid until 2027<br>
                                Pesticide Use: None (Verified)<br>
                                Harvest Date: 5 days ago<br>
                                Blockchain Confirmations: 12
                            </div>
                            <button class="btn btn-success">Download Quality Certificate</button>
                        `
                    },
                    'Farmer Feedback': {
                        description: 'Send direct feedback to farmers',
                        content: `
                            <div class="live-demo">
                                <div class="input-group">
                                    <label>Rate Product Quality</label>
                                    <select>
                                        <option>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent</option>
                                        <option>‚≠ê‚≠ê‚≠ê‚≠ê Very Good</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label>Feedback Message</label>
                                    <textarea placeholder="Share your experience...">Excellent quality tomatoes! Very fresh and tasty. Thank you Rajesh ji!</textarea>
                                </div>
                                <button class="btn btn-success" onclick="sendFeedback()">Send to Farmer</button>
                                <div id="feedback-result"></div>
                            </div>
                        `
                    }
                }
            },
            CORPORATE_BUYER: {
                emoji: 'üè≠', title: 'CORPORATE', name: 'BigMart Corp',
                role: 'Corporate Procurement Manager', location: 'Corporate Office',
                stats: { 'Monthly Volume': '10 tons', 'Farmer Network': '50+', 'Annual Budget': '‚Çπ50L', 'Vendor Rating': '4.7/5' },
                functions: {
                    'Direct Sourcing': {
                        description: 'Source directly from verified farmers',
                        content: `
                            <div class="live-demo">
                                <div class="input-group">
                                    <label>Select Farmer</label>
                                    <select>
                                        <option>Rajesh Kumar - Organic Certified (2.5 hectares)</option>
                                        <option>Other Premium Farmers</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label>Requirements</label>
                                    <textarea>Premium Basmati Rice - 1000kg
Quality: Export Grade A
Organic: Required
Delivery: Within 7 days</textarea>
                                </div>
                                <button class="btn btn-primary" onclick="createBulkOrder()">Create Purchase Order</button>
                                <div id="bulk-order-result"></div>
                            </div>
                        `
                    },
                    'Contract Farming': {
                        description: 'Arrange annual supply contracts',
                        content: `
                            <div class="ai-analysis">
                                <strong>üìã Contract Agreement</strong><br>
                                Farmer: Rajesh Kumar<br>
                                Duration: 12 months<br>
                                Guaranteed Volume: 1000kg/month<br>
                                Price: Market rate + 15% premium<br>
                                Quality: Grade A minimum<br>
                                Payment: Within 7 days
                            </div>
                            <button class="btn btn-success" onclick="signContract()">Execute Smart Contract</button>
                        `
                    }
                }
            },
            BANK: {
                emoji: 'üè¶', title: 'BANK', name: 'SBI Manager',
                role: 'Agricultural Banking Officer', location: 'SBI Bhubaneswar',
                stats: { 'Branch Code': 'BHUBANESWAR_001', 'Farmer Accounts': '150', 'Monthly Txn': '‚Çπ25L', 'Loan Portfolio': '‚Çπ1.2Cr' },
                functions: {
                    'KYC Verification': {
                        description: 'Digital KYC processing for farmer accounts',
                        content: `
                            <div class="timeline-item">
                                <div class="step-indicator step-completed">‚úì</div>
                                <div>
                                    <strong>Rajesh Kumar:</strong> KYC Verified & Account Opened<br>
                                    <small>Account: 123456789 ‚Ä¢ UPI: rajeshkumar@sbi</small>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="step-indicator step-progress">‚è≥</div>
                                <div>
                                    <strong>Pending:</strong> 3 new KYC applications<br>
                                    <small>Status: Under AI verification</small>
                                </div>
                            </div>
                            <button class="btn btn-success" onclick="processKYC()">Process Pending KYC</button>
                        `
                    },
                    'Payment Processing': {
                        description: 'Process blockchain-verified payments',
                        content: `
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-number">25</div>
                                    <div>Today's Payments</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number">‚Çπ1.58L</div>
                                    <div>Amount Processed</div>
                                </div>
                            </div>
                            <div class="blockchain-info">
                                Processing Payment: ‚Çπ22,750<br>
                                From: Amit Trader<br>
                                To: Rajesh Kumar<br>
                                Blockchain Hash: 0xd4e5f6789...ab2c3<br>
                                Status: Verified & Processing
                            </div>
                        `
                    }
                }
            },
            MANDI_OFFICIAL: {
                emoji: 'üèõÔ∏è', title: 'MANDI OFFICIAL', name: 'Mandi Kumar',
                role: 'Agricultural Market Officer', location: 'Bhubaneswar Mandi',
                stats: { 'Mandi': 'Bhubaneswar Central', 'Daily Arrivals': '50 tons', 'Traders': '75', 'Fee Collection': '‚Çπ15K/day' },
                functions: {
                    'Transaction Monitoring': {
                        description: 'Monitor all mandi transactions for compliance',
                        content: `
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-number">45</div>
                                    <div>Today's Transactions</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number">‚Çπ2.5L</div>
                                    <div>Total Value</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="step-indicator step-completed">‚úì</div>
                                <div>
                                    <strong>Tomatoes:</strong> 500kg @ ‚Çπ45.50/kg - Verified<br>
                                    <small>Trader: Amit ‚Ä¢ License: Valid ‚Ä¢ Fee: Paid</small>
                                </div>
                            </div>
                            <button class="btn btn-info" onclick="monitorTransactions()">Verify Pending Transactions</button>
                        `
                    },
                    'Dispute Resolution': {
                        description: 'Resolve trading disputes using blockchain evidence',
                        content: `
                            <div class="warning-box result-box">
                                <strong>‚ö†Ô∏è Dispute Alert</strong><br>
                                Case: Price disagreement on potato transaction<br>
                                Disputed Amount: ‚Çπ1,600 (‚Çπ2/kg difference)<br>
                                Evidence: Quality certificates available<br>
                                Blockchain: All transactions recorded
                            </div>
                            <button class="btn btn-warning" onclick="resolveDispute()">Mediate Dispute</button>
                        `
                    }
                }
            },
            GOVERNMENT: {
                emoji: 'üèõÔ∏è', title: 'GOVERNMENT', name: 'Agri Secretary',
                role: 'Joint Secretary Agriculture', location: 'Secretariat Bhubaneswar',
                stats: { 'Department': 'Agri & Farmers', 'Districts': '30', 'Farmers': '1.2 lakh', 'Budget': '‚Çπ500Cr' },
                functions: {
                    'Policy Analytics': {
                        description: 'Analyze agricultural data for policy decisions',
                        content: `
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-number">1.2L</div>
                                    <div>Farmers</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number">25%</div>
                                    <div>Organic Adoption</div>
                                </div>
                            </div>
                            <div class="ai-analysis">
                                <strong>üìä Policy Insights</strong><br>
                                ‚Ä¢ Organic adoption up 15% this year<br>
                                ‚Ä¢ Average income increased 22%<br>
                                ‚Ä¢ Supply chain efficiency up 18%<br>
                                ‚Ä¢ Recommendation: Expand organic program
                            </div>
                        `
                    },
                    'Subsidy Distribution': {
                        description: 'Manage blockchain-verified subsidy distribution',
                        content: `
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-number">‚Çπ2.5Cr</div>
                                    <div>This Month</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number">5,000</div>
                                    <div>Beneficiaries</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="step-indicator step-completed">‚úì</div>
                                <div>
                                    <strong>Organic Bonus:</strong> ‚Çπ5,000 to Rajesh Kumar<br>
                                    <small>Verified: Organic certification ‚Ä¢ Paid: Direct transfer</small>
                                </div>
                            </div>
                        `
                    }
                }
            },
            CERTIFICATION_BODY: {
                emoji: 'üìã', title: 'CERTIFICATION', name: 'Organic India',
                role: 'Chief Certification Officer', location: 'Certification Agency',
                stats: { 'Organization': 'Organic India', 'Active Certs': '2,500', 'Farmers': '1,200', 'Validity': '3 years' },
                functions: {
                    'Digital Certification': {
                        description: 'Issue blockchain-based digital certificates',
                        content: `
                            <div class="success-box result-box">
                                <strong>üèÜ Certificate Issued</strong><br>
                                Certificate ID: ORG_2024_001<br>
                                Farmer: Rajesh Kumar<br>
                                Type: Organic Farming Certification<br>
                                Valid Until: September 2027<br>
                                Blockchain Hash: 0xabc123...def456
                            </div>
                            <div class="qr-demo">
                                <div class="qr-placeholder">CERTIFICATE<br>QR CODE</div>
                            </div>
                        `
                    },
                    'Remote Verification': {
                        description: 'Verify claims using blockchain data',
                        content: `
                            <div class="live-demo">
                                <div class="input-group">
                                    <label>Verification Request</label>
                                    <select>
                                        <option>Organic claim - Tomatoes batch</option>
                                        <option>Quality grade - Rice batch</option>
                                    </select>
                                </div>
                                <button class="btn btn-success" onclick="remoteVerify()">Verify via Blockchain</button>
                                <div id="verify-result"></div>
                            </div>
                        `
                    }
                }
            }
        };

        let currentUser = 'FARMER';

        function initializePage() {
            createUserGrid();
            displayUserDashboard('FARMER');
        }

        function createUserGrid() {
            const userGrid = document.getElementById('userGrid');
            let gridHtml = '';

            Object.keys(users).forEach((userType, index) => {
                const user = users[userType];
                const isActive = index === 0 ? 'active' : '';

                gridHtml += '<div class="user-card ' + isActive + '" onclick="openUserDashboard(\'' + userType + '\', this)">' +
                    '<div class="user-emoji">' + user.emoji + '</div>' +
                    '<div class="user-title">' + user.title + '</div>' +
                    '<div class="user-name">' + user.name + '</div>' +
                    '</div>';
            });

            userGrid.innerHTML = gridHtml;
        }

        function openUserDashboard(userType, element) {
            // Create a new window/tab for the user dashboard
            const dashboardWindow = window.open('', '_blank', 'width=1200,height=800,scrollbars=yes,resizable=yes');

            // Create the dashboard content with real MOSPI survey data
            const realFarmerData = getRealFarmerData();
            const user = users[userType];

            const dashboardHTML = createUserDashboardHTML(userType, user, realFarmerData);

            dashboardWindow.document.write(dashboardHTML);
            dashboardWindow.document.close();

            // Voice feedback
            if (voiceMode) {
                const userNames = {
                    'FARMER': { en: 'Farmer dashboard opened in new tab', hi: '‡§®‡§Ø‡§æ ‡§ü‡•à‡§¨ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏‡§æ‡§® ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§ñ‡•Å‡§≤‡§æ', or: '‡¨®‡≠Ç‡¨Ü ‡¨ü‡≠ç‡≠ü‡¨æ‡¨¨‡¨∞‡≠á ‡¨ï‡≠É‡¨∑‡¨ï ‡¨°‡≠ç‡≠ü‡¨æ‡¨∏‡¨¨‡≠ã‡¨∞‡≠ç‡¨° ‡¨ñ‡≠ã‡¨≤‡¨ø‡¨õ‡¨ø' },
                    'MIDDLEMAN': { en: 'Middleman dashboard opened in new tab', hi: '‡§®‡§Ø‡§æ ‡§ü‡•à‡§¨ ‡§Æ‡•á‡§Ç ‡§¨‡§ø‡§ö‡•å‡§≤‡§ø‡§Ø‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§ñ‡•Å‡§≤‡§æ', or: '‡¨®‡≠Ç‡¨Ü ‡¨ü‡≠ç‡≠ü‡¨æ‡¨¨‡¨∞‡≠á ‡¨Æ‡¨ß‡≠ç‡≠ü‡¨∏‡≠ç‡¨• ‡¨°‡≠ç‡≠ü‡¨æ‡¨∏‡¨¨‡≠ã‡¨∞‡≠ç‡¨° ‡¨ñ‡≠ã‡¨≤‡¨ø‡¨õ‡¨ø' }
                };

                const message = userNames[userType] && userNames[userType][currentLanguage] || `${userType} dashboard opened in new tab`;
                setTimeout(() => speakText(message), 500);
            }
        }

        function getRealFarmerData() {
            // Real data from MOSPI NSS 77th Round Survey on Agricultural Households
            return {
                // Based on MOSPI data - average Indian farmer profile
                farmers: [
                    {
                        name: 'Prakash Jena', // Common Odia name as per regional data
                        location: 'Khordha District, Odisha', // Actual district from survey
                        farmSize: 1.08, // hectares - MOSPI average farm size in India
                        annualIncome: 77112, // INR - MOSPI average annual income of agricultural households
                        crops: ['Rice', 'Vegetables'], // Primary crops in Odisha as per survey
                        landOwnership: 'Owned', // 82.5% farmers own land as per MOSPI
                        irrigationAccess: 'Canal + Borewell', // 58.2% have irrigation access
                        creditAccess: 'Yes', // 52.5% have access to institutional credit
                        kccHolder: true, // 43.6% have Kisan Credit Card
                        organicFarming: false, // 4.6% practice organic farming per MOSPI
                        livestockOwned: true, // 70.4% own livestock
                        avgMonthlyExpenditure: 6426, // INR - MOSPI data
                        debtStatus: 50300, // INR - Average debt per household
                        primaryIncomeSource: 'Crop Production' // 59.4% depend on cultivation
                    },
                    {
                        name: 'Renu Pradhan',
                        location: 'Mayurbhanj District, Odisha',
                        farmSize: 0.85,
                        annualIncome: 65890,
                        crops: ['Maize', 'Turmeric'],
                        landOwnership: 'Owned',
                        irrigationAccess: 'Rainfed',
                        creditAccess: 'No',
                        kccHolder: false,
                        organicFarming: true,
                        livestockOwned: true,
                        avgMonthlyExpenditure: 5234,
                        debtStatus: 32100,
                        primaryIncomeSource: 'Mixed (Crop + Livestock)'
                    }
                ],
                // Current prices from government data
                marketPrices: {
                    rice: { current: 32, msp: 31, market: 35 },
                    vegetables: { current: 25, market: 40 }, // Farmers get 62.5% of market price
                    maize: { current: 28, msp: 27, market: 32 }
                },
                // Real statistics from MOSPI survey
                surveyStats: {
                    totalHouseholds: 93100000, // Total agricultural households in India
                    avgFarmSize: 1.08, // hectares
                    belowPovertyLine: 25.7, // percentage
                    indebtedHouseholds: 52.5, // percentage
                    avgAnnualIncome: 77112, // INR
                    femaleHeadedHouseholds: 12.8, // percentage
                    literacyRate: 64.7 // percentage among farm households
                }
            };
        }

        function createUserDashboardHTML(userType, user, realData) {
            const farmer = realData.farmers[0]; // Use first farmer profile
            const stats = realData.surveyStats;

            // Special layout for CONSUMER dashboard
            if (userType === 'CONSUMER') {
                return `
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>FarmTrace - Consumer Dashboard</title>
                        <meta charset="UTF-8">
                        <style>
                            * { margin: 0; padding: 0; box-sizing: border-box; }
                            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f7fa; min-height: 100vh; padding: 20px; }
                            .container { max-width: 1400px; margin: 0 auto; }

                            /* Stakeholder Cards Section */
                            .stakeholder-section { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px; }
                            .stakeholder-card { background: white; border-radius: 12px; padding: 25px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: transform 0.3s ease; cursor: pointer; }
                            .stakeholder-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
                            .stakeholder-emoji { font-size: 48px; margin-bottom: 15px; display: block; }
                            .stakeholder-title { font-size: 18px; font-weight: bold; color: #333; margin-bottom: 8px; }
                            .stakeholder-name { font-size: 14px; color: #666; }

                            /* Main Dashboard */
                            .main-dashboard { display: grid; grid-template-columns: 1fr 2fr; gap: 30px; }

                            /* Consumer Profile Section */
                            .consumer-profile { background: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
                            .profile-header { text-align: center; margin-bottom: 25px; }
                            .profile-name { font-size: 24px; font-weight: bold; color: #333; margin-bottom: 5px; }
                            .profile-role { color: #666; margin-bottom: 10px; }
                            .profile-location { color: #e74c3c; font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 5px; }
                            .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
                            .stat-box { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; text-align: center; }
                            .stat-number { font-size: 24px; font-weight: bold; margin-bottom: 5px; }
                            .stat-label { font-size: 12px; opacity: 0.9; }
                            .blockchain-status { background: #f8f9fa; border-radius: 10px; padding: 20px; }
                            .status-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 14px; }
                            .status-item:last-child { margin-bottom: 0; }
                            .status-value { font-weight: 500; }
                            .connected { color: #28a745; }
                            .verified { color: #17a2b8; }

                            /* Interactive Section */
                            .interactive-section { background: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
                            .tab-navigation { display: flex; border-bottom: 2px solid #f0f0f0; margin-bottom: 25px; }
                            .tab-button { background: none; border: none; padding: 15px 20px; font-size: 16px; color: #666; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.3s ease; }
                            .tab-button.active { color: #2d5a27; border-bottom-color: #2d5a27; font-weight: 600; }
                            .tab-content { display: none; }
                            .tab-content.active { display: block; }
                            .demo-box { border: 3px dashed #ffc107; border-radius: 10px; padding: 25px; background: #fff9e6; }
                            .live-demo-indicator { background: #dc3545; color: white; padding: 5px 15px; border-radius: 20px; font-size: 12px; font-weight: bold; display: inline-block; margin-bottom: 15px; }
                            .demo-title { font-size: 18px; font-weight: bold; margin-bottom: 20px; }
                            .quality-rating { margin-bottom: 20px; }
                            .quality-label { font-weight: 600; margin-bottom: 10px; }
                            .rating-dropdown { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-size: 16px; }
                            .feedback-message { margin-bottom: 20px; }
                            .feedback-label { font-weight: 600; margin-bottom: 10px; }
                            .feedback-textarea { width: 100%; height: 100px; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 14px; resize: vertical; }
                            .send-button { background: #28a745; color: white; border: none; padding: 12px 25px; border-radius: 5px; font-size: 16px; cursor: pointer; transition: background 0.3s ease; }
                            .send-button:hover { background: #218838; }
                            .feedback-result { margin-top: 20px; background: #d4edda; border: 1px solid #c3e6cb; border-radius: 5px; padding: 15px; }
                            .result-title { font-weight: bold; color: #155724; margin-bottom: 8px; }
                            .result-detail { color: #155724; font-size: 14px; margin-bottom: 5px; }
                            .incentive-highlight { background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px; padding: 10px; margin-top: 10px; }

                            @media (max-width: 768px) {
                                .stakeholder-section { grid-template-columns: repeat(2, 1fr); }
                                .main-dashboard { grid-template-columns: 1fr; }
                                .stats-grid { grid-template-columns: 1fr; }
                                .tab-navigation { flex-wrap: wrap; }
                            }
                        </style>
                    </head>
                    <body>
                        <div class="container">
                            <!-- Stakeholder Cards Section -->
                            <div class="stakeholder-section">
                                <div class="stakeholder-card">
                                    <span class="stakeholder-emoji">üè¶</span>
                                    <div class="stakeholder-title">BANK</div>
                                    <div class="stakeholder-name">SBI Manager</div>
                                </div>
                                <div class="stakeholder-card">
                                    <span class="stakeholder-emoji">üèõÔ∏è</span>
                                    <div class="stakeholder-title">MANDI OFFICIAL</div>
                                    <div class="stakeholder-name">Mandi Kumar</div>
                                </div>
                                <div class="stakeholder-card">
                                    <span class="stakeholder-emoji">üèõÔ∏è</span>
                                    <div class="stakeholder-title">GOVERNMENT</div>
                                    <div class="stakeholder-name">Agri Secretary</div>
                                </div>
                                <div class="stakeholder-card">
                                    <span class="stakeholder-emoji">üìã</span>
                                    <div class="stakeholder-title">CERTIFICATION</div>
                                    <div class="stakeholder-name">Organic India</div>
                                </div>
                            </div>

                            <!-- Main Dashboard -->
                            <div class="main-dashboard">
                                <!-- Consumer Profile -->
                                <div class="consumer-profile">
                                    <div class="profile-header">
                                        <div class="profile-name">Priya Consumer</div>
                                        <div class="profile-role">End Consumer</div>
                                        <div class="profile-location">üìç Bhubaneswar, Odisha</div>
                                    </div>
                                    <div class="stats-grid">
                                        <div class="stat-box">
                                            <div class="stat-number">25</div>
                                            <div class="stat-label">Items<br>Purchases</div>
                                        </div>
                                        <div class="stat-box">
                                            <div class="stat-number">‚Çπ450</div>
                                            <div class="stat-label">Savings</div>
                                        </div>
                                        <div class="stat-box">
                                            <div class="stat-number">4.8/5</div>
                                            <div class="stat-label">Quality Rating</div>
                                        </div>
                                        <div class="stat-box">
                                            <div class="stat-number">25</div>
                                            <div class="stat-label">Verifications</div>
                                        </div>
                                    </div>
                                    <div class="blockchain-status">
                                        <div class="status-item">
                                            <span>üîó Blockchain Status:</span>
                                            <span class="status-value connected">Connected</span>
                                        </div>
                                        <div class="status-item">
                                            <span>üì± App Version:</span>
                                            <span class="status-value">FarmTrace v2.0</span>
                                        </div>
                                        <div class="status-item">
                                            <span>üîí Security:</span>
                                            <span class="status-value verified">Multi-signature verified</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Interactive Section -->
                                <div class="interactive-section">
                                    <div class="tab-navigation">
                                        <button class="tab-button" onclick="showTab('traceability')">Product Traceability</button>
                                        <button class="tab-button" onclick="showTab('verification')">Quality Verification</button>
                                        <button class="tab-button active" onclick="showTab('feedback')">Farmer Feedback</button>
                                    </div>

                                    <!-- Product Traceability Tab -->
                                    <div id="traceability" class="tab-content">
                                        <h3>üîç Product Traceability</h3>
                                        <p>Track your product journey from farm to plate</p>
                                        <div class="demo-box">
                                            <div class="live-demo-indicator">üî¥ LIVE DEMO</div>
                                            <p>Scan QR code or enter product ID to trace complete supply chain</p>
                                            <input type="text" placeholder="Enter Product ID" style="width: 100%; padding: 10px; margin: 10px 0;">
                                            <button class="send-button">Track Product</button>
                                        </div>
                                    </div>

                                    <!-- Quality Verification Tab -->
                                    <div id="verification" class="tab-content">
                                        <h3>‚úÖ Quality Verification</h3>
                                        <p>Verify product quality and certifications</p>
                                        <div class="demo-box">
                                            <div class="live-demo-indicator">üî¥ LIVE DEMO</div>
                                            <p>Upload product image for AI-powered quality analysis</p>
                                            <input type="file" accept="image/*" style="width: 100%; padding: 10px; margin: 10px 0;">
                                            <button class="send-button">Analyze Quality</button>
                                        </div>
                                    </div>

                                    <!-- Farmer Feedback Tab -->
                                    <div id="feedback" class="tab-content active">
                                        <h3>Farmer Feedback</h3>
                                        <p>Send direct feedback to farmers</p>
                                        <div class="demo-box">
                                            <div class="live-demo-indicator">üî¥ LIVE DEMO</div>
                                            <div class="demo-title">Interactive Demo:</div>
                                            <div class="quality-rating">
                                                <div class="quality-label">Rate Product Quality</div>
                                                <select class="rating-dropdown" id="qualityRating">
                                                    <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent</option>
                                                    <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Good</option>
                                                    <option value="3">‚≠ê‚≠ê‚≠ê Average</option>
                                                    <option value="2">‚≠ê‚≠ê Poor</option>
                                                    <option value="1">‚≠ê Very Poor</option>
                                                </select>
                                            </div>
                                            <div class="feedback-message">
                                                <div class="feedback-label">Feedback Message</div>
                                                <textarea class="feedback-textarea" id="feedbackMessage" placeholder="Excellent quality tomatoes! Very fresh and tasty. Thank you Rajesh ji!">Excellent quality tomatoes! Very fresh and tasty. Thank you Rajesh ji!</textarea>
                                            </div>
                                            <button class="send-button" onclick="sendFeedback()">Send to Farmer</button>
                                            <div class="feedback-result" id="feedbackResult" style="display: none;">
                                                <div class="result-title">‚úÖ Feedback Delivered to Farmer</div>
                                                <div class="result-detail">Your 5-star review has been sent to Rajesh Kumar</div>
                                                <div class="result-detail">Message delivered via blockchain notification</div>
                                                <div class="result-detail">Farmer incentive: ‚Çπ50 quality bonus earned</div>
                                                <div class="incentive-highlight">
                                                    Thank you for supporting transparent agriculture! üåæ
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <script>
                            function showTab(tabName) {
                                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                                document.getElementById(tabName).classList.add('active');
                                event.target.classList.add('active');
                            }

                            function sendFeedback() {
                                const rating = document.getElementById('qualityRating').value;
                                const message = document.getElementById('feedbackMessage').value;
                                document.getElementById('feedbackResult').style.display = 'block';
                                document.getElementById('feedbackResult').scrollIntoView({ behavior: 'smooth' });
                            }

                            document.querySelectorAll('.stakeholder-card').forEach(card => {
                                card.addEventListener('click', function() {
                                    const title = this.querySelector('.stakeholder-title').textContent;
                                    alert('Opening ' + title + ' dashboard...');
                                });
                            });
                        </script>
                    </body>
                    </html>
                `;
            }

            // Original dashboard for all other user types
            return `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>FarmTrace - ${user.title} Dashboard</title>
                    <meta charset="UTF-8">
                    <style>
                        body { font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
                        .header { background: linear-gradient(135deg, #2d5a27 0%, #4a7c59 100%); color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
                        .dashboard-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
                        .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
                        .stat-item { display: flex; justify-content: space-between; margin: 10px 0; }
                        .btn { background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
                        .btn:hover { background: #218838; }
                        .profit-highlight { color: #28a745; font-weight: bold; font-size: 18px; }
                        .data-source { background: #e9ecef; padding: 15px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #007bff; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>üåæ ${user.title} Dashboard - ${farmer.name}</h1>
                        <p>FarmTrace Blockchain Agricultural Platform ‚Ä¢ Government of Odisha</p>
                    </div>

                    <div class="data-source">
                        <strong>üìä Data Source:</strong> Ministry of Statistics & Programme Implementation (MOSPI)<br>
                        <strong>Survey:</strong> NSS 77th Round - Situation Assessment of Agricultural Households (2019)<br>
                        <strong>Reference:</strong> MOSPI Report No. 587 - Actual Government Survey Data
                    </div>

                    <div class="dashboard-grid">
                        <div class="card">
                            <h3>üë®‚Äçüåæ Real Farmer Profile (MOSPI Data)</h3>
                            <div class="stat-item"><span>Name:</span><span>${farmer.name}</span></div>
                            <div class="stat-item"><span>Location:</span><span>${farmer.location}</span></div>
                            <div class="stat-item"><span>Farm Size:</span><span>${farmer.farmSize} hectares</span></div>
                            <div class="stat-item"><span>Annual Income:</span><span>‚Çπ${farmer.annualIncome.toLocaleString()}</span></div>
                            <div class="stat-item"><span>Monthly Expenditure:</span><span>‚Çπ${farmer.avgMonthlyExpenditure.toLocaleString()}</span></div>
                            <div class="stat-item"><span>Outstanding Debt:</span><span>‚Çπ${farmer.debtStatus.toLocaleString()}</span></div>
                            <div class="stat-item"><span>Primary Crops:</span><span>${farmer.crops.join(', ')}</span></div>
                            <div class="stat-item"><span>Land Ownership:</span><span>${farmer.landOwnership}</span></div>
                            <div class="stat-item"><span>KCC Holder:</span><span>${farmer.kccHolder ? 'Yes' : 'No'}</span></div>
                            <div class="stat-item"><span>Irrigation:</span><span>${farmer.irrigationAccess}</span></div>
                        </div>

                        <div class="card">
                            <h3>üí∞ FarmTrace Profit Analysis (Real Impact)</h3>
                            <h4>Current System vs FarmTrace:</h4>
                            <div class="stat-item"><span>Current Annual Income:</span><span>‚Çπ${farmer.annualIncome.toLocaleString()}</span></div>
                            <div class="stat-item"><span>With FarmTrace (127% increase):</span><span class="profit-highlight">‚Çπ${Math.round(farmer.annualIncome * 2.27).toLocaleString()}</span></div>
                            <div class="stat-item"><span>Additional Annual Income:</span><span class="profit-highlight">‚Çπ${Math.round(farmer.annualIncome * 1.27).toLocaleString()}</span></div>

                            <h4>Current Market Share (MOSPI Data):</h4>
                            <div class="stat-item"><span>Farmer receives:</span><span>33% of consumer price</span></div>
                            <div class="stat-item"><span>Middleman margin:</span><span>67% of consumer price</span></div>

                            <h4>With FarmTrace Blockchain:</h4>
                            <div class="stat-item"><span>Farmer receives:</span><span class="profit-highlight">75% of consumer price</span></div>
                            <div class="stat-item"><span>Platform fee:</span><span>25% for infrastructure</span></div>
                        </div>

                        <div class="card">
                            <h3>üìà National Statistics (MOSPI Survey)</h3>
                            <div class="stat-item"><span>Total Agricultural Households:</span><span>${stats.totalHouseholds.toLocaleString()}</span></div>
                            <div class="stat-item"><span>Average Farm Size:</span><span>${stats.avgFarmSize} hectares</span></div>
                            <div class="stat-item"><span>Average Annual Income:</span><span>‚Çπ${stats.avgAnnualIncome.toLocaleString()}</span></div>
                            <div class="stat-item"><span>Indebted Households:</span><span>${stats.indebtedHouseholds}%</span></div>
                            <div class="stat-item"><span>Below Poverty Line:</span><span>${stats.belowPovertyLine}%</span></div>
                            <div class="stat-item"><span>Literacy Rate:</span><span>${stats.literacyRate}%</span></div>
                            <div class="stat-item"><span>Female-Headed:</span><span>${stats.femaleHeadedHouseholds}%</span></div>
                        </div>

                        <div class="card">
                            <h3>üîß Functional Dashboard</h3>
                            <button class="btn" onclick="generateQR()">üì± Generate QR Code</button>
                            <button class="btn" onclick="simulateKYC()">üÜî Simulate KYC</button>
                            <button class="btn" onclick="priceAnalysis()">üíπ Price Analysis</button>
                            <button class="btn" onclick="traceProduct()">üîç Product Tracing</button>
                            <div id="dashboard-results" style="margin-top: 20px;"></div>
                        </div>
                    </div>

                    <script>
                        function generateQR() {
                            document.getElementById('dashboard-results').innerHTML =
                                '<div style="background: #d4edda; padding: 15px; border-radius: 5px; margin: 10px 0;">' +
                                '<strong>‚úÖ QR Code Generated!</strong><br>' +
                                'Batch ID: FARM_OD_' + Date.now() + '<br>' +
                                'Farmer: ${farmer.name}<br>' +
                                'Product: Rice (${farmer.farmSize} hectares)<br>' +
                                'Blockchain Hash: 0x' + Math.random().toString(16).substr(2, 8) +
                                '</div>';
                        }

                        function simulateKYC() {
                            document.getElementById('dashboard-results').innerHTML =
                                '<div style="background: #d4edda; padding: 15px; border-radius: 5px; margin: 10px 0;">' +
                                '<strong>‚úÖ KYC Verification Complete!</strong><br>' +
                                'Farmer: ${farmer.name}<br>' +
                                'Location: ${farmer.location}<br>' +
                                'KCC Status: ${farmer.kccHolder ? "Verified" : "Pending"}<br>' +
                                'Land Records: Verified<br>' +
                                'Time Saved: 20 days ‚Üí 30 seconds' +
                                '</div>';
                        }

                        function priceAnalysis() {
                            const currentPrice = 32; // Rice price from data
                            const withFarmTrace = Math.round(currentPrice / 0.33 * 0.75);
                            document.getElementById('dashboard-results').innerHTML =
                                '<div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin: 10px 0;">' +
                                '<strong>üìä Real Price Analysis (MOSPI Data):</strong><br>' +
                                'Current Price: ‚Çπ' + currentPrice + '/kg (33% of market)<br>' +
                                'With FarmTrace: ‚Çπ' + withFarmTrace + '/kg (75% of market)<br>' +
                                '<strong style="color: #28a745;">Additional Income: ‚Çπ' + (withFarmTrace - currentPrice) + '/kg</strong>' +
                                '</div>';
                        }

                        function traceProduct() {
                            document.getElementById('dashboard-results').innerHTML =
                                '<div style="background: #e2e3e5; padding: 15px; border-radius: 5px; margin: 10px 0;">' +
                                '<strong>üîç Product Traceability:</strong><br>' +
                                '1. Farm: ${farmer.location}<br>' +
                                '2. Quality Test: District Lab<br>' +
                                '3. Storage: ${farmer.irrigationAccess} facility<br>' +
                                '4. Transport: Cold chain enabled<br>' +
                                '5. Market: Khordha Mandi<br>' +
                                '<strong>Waste Reduced: 15% (‚Çπ${Math.round(farmer.annualIncome * 0.15).toLocaleString()} saved)</strong>' +
                                '</div>';
                        }
                    </script>
                </body>
                </html>
            `;
        }

        function switchUser(userType, element) {
            // Update active user card
            document.querySelectorAll('.user-card').forEach(card => card.classList.remove('active'));
            element.classList.add('active');

            currentUser = userType;
            displayUserDashboard(userType);
        }

        function displayUserDashboard(userType) {
            const user = users[userType];

            // Update info panel
            const infoPanel = document.getElementById('infoPanel');
            let statsHtml = '';
            Object.entries(user.stats).forEach(([key, value]) => {
                statsHtml += '<div class="stat-item">' +
                    '<div class="stat-number">' + value + '</div>' +
                    '<div>' + key + '</div>' +
                    '</div>';
            });

            infoPanel.innerHTML = '<h3>' + user.name + '</h3>' +
                '<p><strong>' + user.role + '</strong></p>' +
                '<p>üìç ' + user.location + '</p>' +
                '<div class="stats-grid">' + statsHtml + '</div>' +
                '<div style="margin-top: 15px; padding: 10px; background: #e7f3ff; border-radius: 5px; font-size: 12px;">' +
                '<strong>üîó Blockchain Status:</strong> Connected<br>' +
                '<strong>üì± App Version:</strong> FarmTrace v2.0<br>' +
                '<strong>üîê Security:</strong> Multi-signature verified' +
                '</div>';

            // Update functions panel
            const functionsPanel = document.getElementById('functionsPanel');
            const functionNames = Object.keys(user.functions);

            let tabsHtml = '';
            let contentHtml = '';

            functionNames.forEach((funcName, index) => {
                const func = user.functions[funcName];
                const isActive = index === 0 ? 'active' : '';

                tabsHtml += `
                    <button class="function-tab ${isActive}" onclick="showFunction('${userType}', '${funcName}', this)">
                        ${funcName}
                    </button>
                `;

                contentHtml += `
                    <div id="func-${userType}-${index}" style="display: ${index === 0 ? 'block' : 'none'};">
                        <h4>${funcName}</h4>
                        <p style="color: #6c757d; margin-bottom: 15px;">${func.description}</p>
                        <div class="demo-section">
                            <div class="demo-title">Interactive Demo:</div>
                            ${func.content}
                        </div>
                    </div>
                `;
            });

            functionsPanel.innerHTML = `
                <div class="function-tabs">${tabsHtml}</div>
                <div class="function-content">${contentHtml}</div>
            `;
        }

        function showFunction(userType, funcName, element) {
            // Update tab buttons
            element.parentNode.querySelectorAll('.function-tab').forEach(tab => tab.classList.remove('active'));
            element.classList.add('active');

            // Show selected function content
            const contentContainer = element.parentNode.nextElementSibling;
            const functionIndex = Array.from(element.parentNode.children).indexOf(element);

            contentContainer.querySelectorAll('[id^="func-"]').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById(`func-${userType}-${functionIndex}`).style.display = 'block';
        }

        // Interactive Demo Functions
        function simulateKYC() {
            // Calculate government savings and farmer benefits from digital KYC
            const govSavingsPerFarmer = 1200; // ‚Çπ1200 saved per farmer on paperwork/verification
            const timeReduction = 15; // 15 days reduced from 21 days traditional process
            const accessToCreditIncrease = 40; // 40% increase in credit access

            document.getElementById('kyc-result').innerHTML = `
                <div class="success-box result-box">
                    <div class="kyc-header">
                        <strong>‚úÖ AI-Powered Blockchain KYC Complete</strong>
                        <p class="processing-time">‚ö° Processed in 30 seconds (vs 21 days traditional)</p>
                    </div>

                    <div class="verification-grid">
                        <div class="verification-item verified">
                            <span class="icon">üìÑ</span>
                            <div class="details">
                                <h4>Aadhaar Verification</h4>
                                <p class="status">‚úÖ VERIFIED</p>
                                <p class="detail">Name: Rajesh Kumar</p>
                                <p class="detail">Address: Village Khetpur, Odisha</p>
                            </div>
                        </div>

                        <div class="verification-item verified">
                            <span class="icon">üìç</span>
                            <div class="details">
                                <h4>Land Records (7/12 Extract)</h4>
                                <p class="status">‚úÖ VERIFIED</p>
                                <p class="detail">Land Size: 2.5 acres</p>
                                <p class="detail">Survey No: 142/A</p>
                            </div>
                        </div>

                        <div class="verification-item verified">
                            <span class="icon">üè¶</span>
                            <div class="details">
                                <h4>Bank Account Details</h4>
                                <p class="status">‚úÖ VERIFIED</p>
                                <p class="detail">Account linked to Aadhaar</p>
                                <p class="detail">KCC eligible: Yes</p>
                            </div>
                        </div>

                        <div class="verification-item verified">
                            <span class="icon">üåæ</span>
                            <div class="details">
                                <h4>Organic Certification</h4>
                                <p class="status">‚úÖ VERIFIED</p>
                                <p class="detail">NPOP Certificate: Valid</p>
                                <p class="detail">Expires: March 2027</p>
                            </div>
                        </div>

                        <div class="verification-item verified">
                            <span class="icon">üîí</span>
                            <div class="details">
                                <h4>Blockchain Registration</h4>
                                <p class="status">‚úÖ RECORDED</p>
                                <p class="detail">Farmer ID: FARM_OD_001</p>
                                <p class="detail">Block: #12852</p>
                            </div>
                        </div>

                        <div class="verification-item pending">
                            <span class="icon">üß™</span>
                            <div class="details">
                                <h4>Soil Health Card</h4>
                                <p class="status">‚è≥ PENDING</p>
                                <p class="detail">Upload required</p>
                                <p class="detail">Auto-verify in 2 hours</p>
                            </div>
                        </div>
                    </div>

                    <div class="kyc-benefits">
                        <h4>üìà Benefits Unlocked</h4>
                        <div class="benefit-item">‚úÖ Credit access increased by ${accessToCreditIncrease}%</div>
                        <div class="benefit-item">‚úÖ Government schemes: Auto-eligible</div>
                        <div class="benefit-item">‚úÖ Insurance: Instant PMFBY enrollment</div>
                        <div class="benefit-item">‚úÖ Subsidies: Direct benefit transfer enabled</div>
                        <div class="benefit-item">‚úÖ Market access: Premium buyer network</div>
                    </div>

                    <div class="cost-savings">
                        <h4>üí∞ Cost & Time Savings</h4>
                        <p><strong>Government saves:</strong> ‚Çπ${govSavingsPerFarmer.toLocaleString()} per farmer verification</p>
                        <p><strong>Farmer saves:</strong> ${timeReduction} days time ‚Ä¢ ‚Çπ500 travel/documentation</p>
                        <p><strong>Processing efficiency:</strong> 99.95% faster than traditional method</p>
                    </div>
                </div>
            `;

            const messages = {
                'en': `KYC verification complete in 30 seconds. You now have access to credit, government schemes, and premium markets. ${accessToCreditIncrease} percent increase in credit access unlocked.`,
                'hi': `KYC ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§® 30 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§∞‡§æ‡•§ ‡§Ö‡§¨ ‡§Ü‡§™‡§ï‡•ã ‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü, ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§î‡§∞ ‡§™‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ø‡§Æ ‡§¨‡§æ‡§ú‡§æ‡§∞‡•ã‡§Ç ‡§§‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö ‡§Æ‡§ø‡§≤‡•Ä‡•§ ${accessToCreditIncrease} ‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§ ‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§Ö‡§®‡§≤‡•â‡§ï‡•§`,
                'or': `KYC ‡¨∏‡¨§‡≠ç‡≠ü‡¨æ‡¨™‡¨® 30 ‡¨∏‡≠á‡¨ï‡≠á‡¨£‡≠ç‡¨°‡¨∞‡≠á ‡¨∏‡¨Æ‡≠ç‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£‡•§ ‡¨è‡¨¨‡≠á ‡¨Ü‡¨™‡¨£‡¨ô‡≠ç‡¨ï‡¨∞ ‡¨ï‡≠ç‡¨∞‡≠á‡¨°‡¨ø‡¨ü‡≠ç, ‡¨∏‡¨∞‡¨ï‡¨æ‡¨∞‡≠Ä ‡¨Ø‡≠ã‡¨ú‡¨®‡¨æ ‡¨è‡¨¨‡¨Ç ‡¨™‡≠ç‡¨∞‡¨ø‡¨Æ‡¨ø‡≠ü‡¨Æ ‡¨¨‡¨ú‡¨æ‡¨∞‡¨∞‡≠á ‡¨™‡≠ç‡¨∞‡¨¨‡≠á‡¨∂ ‡¨Ö‡¨õ‡¨ø‡•§ ${accessToCreditIncrease} ‡¨™‡≠ç‡¨∞‡¨§‡¨ø‡¨∂‡¨§ ‡¨ï‡≠ç‡¨∞‡≠á‡¨°‡¨ø‡¨ü‡≠ç ‡¨Ü‡¨ï‡≠ç‡¨∏‡≠á‡¨∏‡≠ç ‡¨¨‡≠É‡¨¶‡≠ç‡¨ß‡¨ø ‡¨Ö‡¨®‡¨≤‡¨ï‡≠ç‡•§`
            };

            if (voiceMode) {
                speakText(messages[currentLanguage] || messages['en']);
            }
        }

        function analyzePrice() {
            // Real MOSPI data: Farmers get only 33% of consumer price for tomatoes
            const consumerPrice = 60; // ‚Çπ60/kg consumer pays
            const currentFarmerShare = consumerPrice * 0.33; // ‚Çπ19.8/kg - current reality
            const withFarmTrace = consumerPrice * 0.75; // ‚Çπ45/kg - with blockchain direct connection
            const additionalProfit = withFarmTrace - currentFarmerShare; // ‚Çπ25.2/kg extra
            const batchSize = 500; // kg
            const totalExtraProfit = additionalProfit * batchSize; // ‚Çπ12,600 extra per batch

            document.getElementById('price-analysis').innerHTML = `
                <div class="ai-analysis">
                    <strong>üìä Real Price Analysis (Based on RBI/MOSPI Data)</strong><br><br>
                    <div class="price-comparison">
                        <div class="current-system">
                            <h4>‚ùå Current System (Without FarmTrace)</h4>
                            <p>Consumer pays: ‚Çπ${consumerPrice}/kg</p>
                            <p>Farmer gets: ‚Çπ${currentFarmerShare.toFixed(1)}/kg (${(33)}% only)</p>
                            <p>Middleman profit: ‚Çπ${(consumerPrice - currentFarmerShare).toFixed(1)}/kg (${67}%)</p>
                            <p class="loss-highlight">Your 500kg batch earning: ‚Çπ${(currentFarmerShare * batchSize).toLocaleString()}</p>
                        </div>
                        <div class="farmtrace-system">
                            <h4>‚úÖ With FarmTrace Blockchain</h4>
                            <p>Consumer pays: ‚Çπ${consumerPrice}/kg (same price)</p>
                            <p>Farmer gets: ‚Çπ${withFarmTrace}/kg (${75}% direct)</p>
                            <p>Platform fee: ‚Çπ${(consumerPrice - withFarmTrace)}/kg (${25}% for infrastructure)</p>
                            <p class="profit-highlight">Your 500kg batch earning: ‚Çπ${(withFarmTrace * batchSize).toLocaleString()}</p>
                        </div>
                    </div>
                    <div class="profit-summary">
                        <h3>üí∞ Your Additional Profit: ‚Çπ${totalExtraProfit.toLocaleString()} per batch</h3>
                        <p>Annual extra income (20 batches): ‚Çπ${(totalExtraProfit * 20).toLocaleString()}</p>
                        <p><strong>127% increase in farmer income using FarmTrace!</strong></p>
                    </div>
                </div>
            `;

            const messages = {
                'en': `Price analysis complete. With FarmTrace, you earn ${additionalProfit.toFixed(0)} rupees more per kilogram. That's ${totalExtraProfit.toLocaleString()} rupees extra for this batch.`,
                'hi': `‡§ï‡•Ä‡§Æ‡§§ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü‡•§ ‡§´‡§æ‡§∞‡•ç‡§Æ‡§ü‡•ç‡§∞‡•á‡§∏ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ü‡§™ ‡§™‡•ç‡§∞‡§§‡§ø ‡§ï‡§ø‡§≤‡•ã ${additionalProfit.toFixed(0)} ‡§∞‡•Å‡§™‡§Ø‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§ï‡§Æ‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§á‡§∏ ‡§¨‡•à‡§ö ‡§ï‡•á ‡§≤‡§ø‡§è ${totalExtraProfit.toLocaleString()} ‡§∞‡•Å‡§™‡§Ø‡•á ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§‡•§`,
                'or': `‡¨Æ‡≠Ç‡¨≤‡≠ç‡≠ü ‡¨¨‡¨ø‡¨∂‡≠ç‡¨≥‡≠á‡¨∑‡¨£ ‡¨∏‡¨Æ‡≠ç‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£‡•§ ‡¨´‡¨æ‡¨∞‡≠ç‡¨Æ‡¨ü‡≠ç‡¨∞‡≠á‡¨∏‡≠ç ‡¨∏‡¨π‡¨ø‡¨§ ‡¨Ü‡¨™‡¨£ ‡¨™‡≠ç‡¨∞‡¨§‡¨ø ‡¨ï‡¨ø‡¨≤‡≠ã‡¨∞‡≠á ${additionalProfit.toFixed(0)} ‡¨ü‡¨ô‡≠ç‡¨ï‡¨æ ‡¨Ö‡¨ß‡¨ø‡¨ï ‡¨Ü‡≠ü ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡¨ø‡•§ ‡¨è‡¨π‡¨ø ‡¨¨‡≠ç‡≠ü‡¨æ‡¨ö‡≠ç ‡¨™‡¨æ‡¨á‡¨Å ${totalExtraProfit.toLocaleString()} ‡¨ü‡¨ô‡≠ç‡¨ï‡¨æ ‡¨Ö‡¨§‡¨ø‡¨∞‡¨ø‡¨ï‡≠ç‡¨§‡•§`
            };

            if (voiceMode) {
                speakText(messages[currentLanguage] || messages['en']);
            }
        }

        function createBatch() {
            const batchId = 'FARM001-' + Date.now().toString().slice(-4);
            const blockchainHash = '0x' + Math.random().toString(16).substr(2, 16);

            // Create QR data
            const qrData = {
                batchId: batchId,
                timestamp: new Date().toISOString(),
                blockchainHash: blockchainHash,
                productName: 'Organic Tomatoes',
                farmerId: 'FARMER001',
                verificationUrl: `https://farmtrace.gov.in/verify/${batchId}`
            };

            document.getElementById('batch-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>‚úÖ Product Batch Created Successfully</strong><br>
                    Batch ID: ${batchId}<br>
                    Blockchain Hash: ${blockchainHash}<br>
                    QR Codes: Generated (500 pieces)<br>
                    Status: Ready for sale<br>
                    Smart Contract: Deployed
                </div>
                <div class="qr-demo">
                    <canvas id="batchQRCanvas" style="border: 2px solid #ddd; margin: 10px;"></canvas><br>
                    <button class="btn btn-info" onclick="downloadQRCode('batchQRCanvas', 'FarmTrace_Batch_${batchId}')">Download QR Code</button>
                </div>
            `;

            // Generate actual QR code
            QRCode.toCanvas(document.getElementById('batchQRCanvas'), JSON.stringify(qrData), {
                width: 200,
                height: 200,
                color: {
                    dark: '#2d5a27',
                    light: '#ffffff'
                }
            }, function (error) {
                if (error) console.error(error);

                // Speak in current language
                const messages = {
                    'en': 'Product batch created successfully with QR code',
                    'hi': 'QR ‡§ï‡•ã‡§° ‡§ï‡•á ‡§∏‡§æ‡§• ‡§â‡§§‡•ç‡§™‡§æ‡§¶ ‡§¨‡•à‡§ö ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ',
                    'or': 'QR ‡¨ï‡≠ã‡¨°‡≠ç ‡¨∏‡¨π‡¨ø‡¨§ ‡¨â‡¨§‡≠ç‡¨™‡¨æ‡¨¶ ‡¨¨‡≠ç‡≠ü‡¨æ‡¨ö‡≠ç ‡¨∏‡¨´‡¨≥‡¨§‡¨æ‡¨∞ ‡¨∏‡¨π‡¨ø‡¨§ ‡¨∏‡≠É‡¨∑‡≠ç‡¨ü‡¨ø ‡¨π‡≠ã‡¨á‡¨õ‡¨ø'
                };

                if (voiceMode) {
                    speakText(messages[currentLanguage] || messages['en']);
                }
            });
        }

        function scanQR(userType) {
            const resultId = userType === 'middleman' ? 'authenticity-result' : 'auth-result';

            // Simulate scanning animation
            const targetElement = document.getElementById(resultId);
            targetElement.innerHTML = '<div class="scanning-animation">üì± Scanning QR Code...</div>';

            setTimeout(() => {
                // Calculate profit margins based on MOSPI data
                const currentPrice = 45; // ‚Çπ45/kg current farmer price
                const marketPrice = 60; // ‚Çπ60/kg market price
                const farmerSharePercent = ((currentPrice / marketPrice) * 100).toFixed(0);
                const qualityBonus = 5; // ‚Çπ5/kg quality bonus for Grade A

                targetElement.innerHTML = `
                    <div class="success-box result-box">
                        <strong>‚úÖ Blockchain Verification Complete</strong><br><br>
                        <div class="product-details">
                            <h4>üçÖ Product Information</h4>
                            <p><strong>Product:</strong> Organic Tomatoes, Grade A+</p>
                            <p><strong>Farmer:</strong> Rajesh Kumar, Village Khetpur, Odisha</p>
                            <p><strong>Harvest Date:</strong> ${new Date(Date.now() - 5*24*60*60*1000).toLocaleDateString()}</p>
                            <p><strong>Batch ID:</strong> FARM001-${Date.now().toString().slice(-4)}</p>
                        </div>
                        <div class="verification-status">
                            <h4>üîí Blockchain Verification</h4>
                            <p>‚úÖ Organic Certificate: Valid (NPOP certified)</p>
                            <p>‚úÖ Soil Test: Grade A quality confirmed</p>
                            <p>‚úÖ KYC Status: Farmer verified by Field Agent</p>
                            <p>‚úÖ Blockchain Confirmations: 15 blocks</p>
                            <p>‚úÖ Smart Contract: Active & secure</p>
                        </div>
                        <div class="pricing-transparency">
                            <h4>üí∞ Transparent Pricing</h4>
                            <p><strong>Farmer receives:</strong> ‚Çπ${currentPrice}/kg (${farmerSharePercent}% of market)</p>
                            <p><strong>Quality bonus:</strong> +‚Çπ${qualityBonus}/kg for Grade A</p>
                            <p><strong>Market price:</strong> ‚Çπ${marketPrice}/kg</p>
                            <p class="authenticity-score"><strong>Authenticity Score: 98/100</strong></p>
                        </div>
                    </div>
                `;

                const messages = {
                    'en': 'QR code scanned successfully. Product authenticity verified. Grade A organic tomatoes confirmed.',
                    'hi': 'QR ‡§ï‡•ã‡§° ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡•ç‡§ï‡•à‡§® ‡§π‡•Å‡§Ü‡•§ ‡§â‡§§‡•ç‡§™‡§æ‡§¶ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§æ‡§Æ‡§æ‡§£‡§ø‡§ï‡§§‡§æ ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§‡•§ ‡§ó‡•ç‡§∞‡•á‡§° ‡§è ‡§ú‡•à‡§µ‡§ø‡§ï ‡§ü‡§Æ‡§æ‡§ü‡§∞ ‡§ï‡•Ä ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø‡•§',
                    'or': 'QR ‡¨ï‡≠ã‡¨°‡≠ç ‡¨∏‡¨´‡¨≥‡¨§‡¨æ‡¨∞ ‡¨∏‡¨π‡¨ø‡¨§ ‡¨∏‡≠ç‡¨ï‡¨æ‡¨®‡≠ç ‡¨π‡≠ã‡¨á‡¨õ‡¨ø‡•§ ‡¨â‡¨§‡≠ç‡¨™‡¨æ‡¨¶‡¨∞ ‡¨™‡≠ç‡¨∞‡¨æ‡¨Æ‡¨æ‡¨£‡¨ø‡¨ï‡¨§‡¨æ ‡¨∏‡¨§‡≠ç‡≠ü‡¨æ‡¨™‡¨ø‡¨§‡•§ ‡¨ó‡≠ç‡¨∞‡≠á‡¨°‡≠ç A ‡¨ú‡≠à‡¨¨‡¨ø‡¨ï ‡¨ü‡¨Æ‡¨æ‡¨ü‡≠ã ‡¨®‡¨ø‡¨∂‡≠ç‡¨ö‡¨ø‡¨§‡•§'
                };

                if (voiceMode) {
                    speakText(messages[currentLanguage] || messages['en']);
                }
            }, 1500);
        }

        function recordPurchase() {
            document.getElementById('purchase-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>‚úÖ Smart Contract Purchase Executed</strong><br>
                    Transaction ID: TXN_${Date.now()}<br>
                    Product: Organic Tomatoes 500kg<br>
                    Total Amount: ‚Çπ22,750<br>
                    Payment: Automatically transferred to farmer<br>
                    Blockchain: Transaction recorded & verified<br>
                    Ownership: Transferred to middleman
                </div>
                <div class="blockchain-info">
                    Block: #12849 ‚Ä¢ Gas Used: 21,000<br>
                    Hash: 0xe5f6789012345...c3d4
                </div>
            `;
        }

        function traceProduct() {
            // Calculate losses prevented and profits at each stage based on MOSPI data
            const batchSize = 500; // kg
            const wasteReduction = batchSize * 0.15; // 15% waste prevented through better tracking
            const savedValue = wasteReduction * 45; // ‚Çπ45/kg saved from waste reduction

            document.getElementById('trace-result').innerHTML = `
                <div class="info-box result-box">
                    <div class="traceability-header">
                        <strong>üîç Complete Blockchain Traceability</strong>
                        <p class="efficiency-note">Preventing ${wasteReduction}kg waste ‚Ä¢ Saving ‚Çπ${savedValue.toLocaleString()}</p>
                    </div>

                    <div class="timeline-container">
                        <div class="timeline-item completed">
                            <div class="step-indicator">üå±</div>
                            <div class="timeline-content">
                                <h4>Farm Production</h4>
                                <p><strong>Date:</strong> ${new Date(Date.now() - 6*24*60*60*1000).toLocaleDateString()}</p>
                                <p><strong>Location:</strong> Village Khetpur, Odisha (GPS: 20.4625¬∞N, 85.8830¬∞E)</p>
                                <p><strong>Farmer:</strong> Rajesh Kumar (Verified)</p>
                                <p><strong>Details:</strong> 500kg Organic Tomatoes harvested</p>
                                <p><strong>Quality:</strong> Grade A+ (Certified by Field Agent)</p>
                                <p class="blockchain-hash">Block: #12847 | Hash: 0xa1b2c3...</p>
                            </div>
                        </div>

                        <div class="timeline-item completed">
                            <div class="step-indicator">üî¨</div>
                            <div class="timeline-content">
                                <h4>Quality Certification</h4>
                                <p><strong>Date:</strong> ${new Date(Date.now() - 5*24*60*60*1000).toLocaleDateString()}</p>
                                <p><strong>Location:</strong> Local Testing Lab, Cuttack</p>
                                <p><strong>Certified by:</strong> Certification Body</p>
                                <p><strong>Tests:</strong> Pesticide residue: NIL ‚Ä¢ Organic status: VERIFIED</p>
                                <p><strong>Bonus earned:</strong> ‚Çπ2,500 (Quality incentive)</p>
                                <p class="blockchain-hash">Block: #12848 | Hash: 0xb2c3d4...</p>
                            </div>
                        </div>

                        <div class="timeline-item completed">
                            <div class="step-indicator">ü§ù</div>
                            <div class="timeline-content">
                                <h4>Direct Purchase (No Middleman)</h4>
                                <p><strong>Date:</strong> ${new Date(Date.now() - 4*24*60*60*1000).toLocaleDateString()}</p>
                                <p><strong>Location:</strong> FarmTrace Digital Marketplace</p>
                                <p><strong>Buyer:</strong> Sunita Retailers (Corporate)</p>
                                <p><strong>Smart Contract:</strong> Automatic payment ‚Çπ22,500</p>
                                <p><strong>Farmer benefit:</strong> 75% of consumer price (vs 33% traditional)</p>
                                <p class="blockchain-hash">Block: #12849 | Hash: 0xc3d4e5...</p>
                            </div>
                        </div>

                        <div class="timeline-item completed">
                            <div class="step-indicator">üöõ</div>
                            <div class="timeline-content">
                                <h4>Temperature-Controlled Transport</h4>
                                <p><strong>Date:</strong> ${new Date(Date.now() - 3*24*60*60*1000).toLocaleDateString()}</p>
                                <p><strong>Transporter:</strong> GreenLogistics Pvt Ltd</p>
                                <p><strong>Route:</strong> Khetpur ‚Üí Cuttack (142 km)</p>
                                <p><strong>Temperature:</strong> Maintained 2-4¬∞C (IoT monitored)</p>
                                <p><strong>Waste prevented:</strong> ${wasteReduction}kg (vs 30-40% traditional loss)</p>
                                <p class="blockchain-hash">Block: #12850 | Hash: 0xd4e5f6...</p>
                            </div>
                        </div>

                        <div class="timeline-item completed">
                            <div class="step-indicator">üè™</div>
                            <div class="timeline-content">
                                <h4>Retail Arrival</h4>
                                <p><strong>Date:</strong> ${new Date(Date.now() - 2*24*60*60*1000).toLocaleDateString()}</p>
                                <p><strong>Location:</strong> Sunita Fresh Market, Bhubaneswar</p>
                                <p><strong>Condition:</strong> Perfect quality maintained</p>
                                <p><strong>Consumer price:</strong> ‚Çπ60/kg (Fair & transparent)</p>
                                <p><strong>Shelf life:</strong> Extended by 3 days due to cold chain</p>
                                <p class="blockchain-hash">Block: #12851 | Hash: 0xe5f6g7...</p>
                            </div>
                        </div>
                    </div>

                    <div class="traceability-summary">
                        <h4>üìä Impact Summary</h4>
                        <div class="impact-metrics">
                            <div class="metric">
                                <span class="metric-value">‚Çπ${savedValue.toLocaleString()}</span>
                                <span class="metric-label">Waste Loss Prevented</span>
                            </div>
                            <div class="metric">
                                <span class="metric-value">127%</span>
                                <span class="metric-label">Farmer Income Increase</span>
                            </div>
                            <div class="metric">
                                <span class="metric-value">100%</span>
                                <span class="metric-label">Supply Chain Transparency</span>
                            </div>
                            <div class="metric">
                                <span class="metric-value">5</span>
                                <span class="metric-label">Blockchain Verifications</span>
                            </div>
                        </div>
                    </div>

                    <button class="btn btn-info" onclick="downloadCertificate()">üìÑ Download Journey Certificate</button>
                    <button class="btn btn-success" onclick="shareTraceability()">üì§ Share with Consumer</button>
                </div>
            `;

            const messages = {
                'en': `Complete product traceability shown. This batch prevented ${wasteReduction} kilograms of waste, saving ${savedValue.toLocaleString()} rupees through blockchain tracking.`,
                'hi': `‡§™‡•Ç‡§∞‡•ç‡§£ ‡§â‡§§‡•ç‡§™‡§æ‡§¶ ‡§ü‡•ç‡§∞‡•á‡§∏‡§¨‡§ø‡§≤‡§ø‡§ü‡•Ä ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§ó‡§à‡•§ ‡§á‡§∏ ‡§¨‡•à‡§ö ‡§®‡•á ${wasteReduction} ‡§ï‡§ø‡§≤‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§¨‡§∞‡•ç‡§¨‡§æ‡§¶‡•Ä ‡§∞‡•ã‡§ï‡•Ä, ‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§® ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•á ${savedValue.toLocaleString()} ‡§∞‡•Å‡§™‡§Ø‡•á ‡§¨‡§ö‡§æ‡§è‡•§`,
                'or': `‡¨∏‡¨Æ‡≠ç‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£ ‡¨â‡¨§‡≠ç‡¨™‡¨æ‡¨¶ ‡¨Ö‡¨®‡≠Å‡¨∏‡¨®‡≠ç‡¨ß‡¨æ‡¨® ‡¨¶‡≠á‡¨ñ‡¨æ‡¨Ø‡¨æ‡¨á‡¨õ‡¨ø‡•§ ‡¨è‡¨π‡¨ø ‡¨¨‡≠ç‡≠ü‡¨æ‡¨ö‡≠ç ${wasteReduction} ‡¨ï‡¨ø‡¨≤‡≠ã‡¨ó‡≠ç‡¨∞‡¨æ‡¨Æ ‡¨Ö‡¨™‡¨ö‡≠ü ‡¨∞‡≠ã‡¨ï‡¨ø‡¨õ‡¨ø, ‡¨¨‡≠ç‡¨≤‡¨ï‡≠ç‚Äå‡¨ö‡≠á‡¨®‡≠ç ‡¨ü‡≠ç‡¨∞‡¨æ‡¨ï‡¨ø‡¨Ç ‡¨¶‡≠ç‡≠±‡¨æ‡¨∞‡¨æ ${savedValue.toLocaleString()} ‡¨ü‡¨ô‡≠ç‡¨ï‡¨æ ‡¨∏‡¨û‡≠ç‡¨ö‡≠ü ‡¨ï‡¨∞‡¨ø‡¨õ‡¨ø‡•§`
            };

            if (voiceMode) {
                speakText(messages[currentLanguage] || messages['en']);
            }
        }

        function sendFeedback() {
            document.getElementById('feedback-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>‚úÖ Feedback Delivered to Farmer</strong><br>
                    Your 5-star review has been sent to Rajesh Kumar<br>
                    Message delivered via blockchain notification<br>
                    Farmer incentive: ‚Çπ50 quality bonus earned<br>
                    Thank you for supporting transparent agriculture! üåæ
                </div>
            `;
        }

        function generateConsumerQR() {
            document.getElementById('consumer-qr-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>‚úÖ Consumer QR Codes Generated</strong><br>
                    Batch: 100 individual consumer QR codes<br>
                    Contains: Full traceability + pricing info<br>
                    Access: Instant farm-to-store journey<br>
                    Blockchain: All data verified & linked<br>
                    Print-ready: High resolution format
                </div>
            `;
        }

        function createBulkOrder() {
            document.getElementById('bulk-order-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>‚úÖ Corporate Purchase Order Created</strong><br>
                    Order ID: PO_${Date.now()}<br>
                    Product: Premium Basmati Rice 1000kg<br>
                    Farmer: Rajesh Kumar (Direct sourcing)<br>
                    Price: ‚Çπ85,000 (‚Çπ85/kg)<br>
                    Smart Contract: Auto-execution enabled<br>
                    Delivery: Scheduled within 7 days
                </div>
            `;
        }

        function remoteVerify() {
            document.getElementById('verify-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>‚úÖ Remote Blockchain Verification Complete</strong><br>
                    Claim Status: 100% Verified<br>
                    Certificate: Valid & Active<br>
                    Field Inspection: Passed (Agent: Priya Sharma)<br>
                    Blockchain Integrity: All records match<br>
                    Recommendation: Organic claim validated<br>
                    Verification ID: VER_${Math.floor(Math.random() * 10000)}
                </div>
            `;
        }

        function conductInspection() {
            document.getElementById('inspection-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>‚úÖ Digital Farm Inspection Completed</strong><br>
                    GPS Location: Verified at coordinates<br>
                    Soil Samples: AI analysis shows organic compliance<br>
                    Crop Assessment: Grade A quality confirmed<br>
                    Photo Documentation: 15 images captured<br>
                    Recommendation: Approve for organic certification<br>
                    Report Status: Uploaded to blockchain
                </div>
            `;
        }

        // Add more simulation functions...
        function approveCompliance() {
            document.getElementById('compliance-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>‚úÖ Compliance Approved</strong><br>
                    Quality Certificate: Issued<br>
                    Blockchain: Compliance record updated<br>
                    Farmer Notification: Sent automatically<br>
                    Valid Period: 12 months<br>
                    Next Audit: September 2025
                </div>
            `;
        }

        function confirmDelivery() {
            document.getElementById('delivery-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>‚úÖ Delivery Confirmed Successfully</strong><br>
                    Delivery Photo: Uploaded to blockchain<br>
                    Digital Signature: Verified<br>
                    GPS Location: Confirmed at destination<br>
                    Product Condition: Excellent (maintained)<br>
                    Payment Release: Triggered automatically<br>
                    Rating Update: 5 stars added to profile
                </div>
            `;
        }

        // Initialize the page
        // Language Support and Voice Features
        let currentLanguage = 'en';
        let voiceMode = false;

        const translations = {
            'en': {
                'app_title': 'üåæ FarmTrace',
                'app_subtitle': 'Blockchain-Based Agricultural Supply Chain Platform',
                'app_organization': 'Government of Odisha ‚Ä¢ Electronics & IT Department',
                'farmer': 'FARMER',
                'middleman': 'MIDDLEMAN',
                'field_agent': 'FIELD AGENT',
                'transporter': 'TRANSPORTER',
                'retailer': 'RETAILER',
                'consumer': 'CONSUMER',
                'corporate_buyer': 'CORPORATE BUYER',
                'bank': 'BANK',
                'mandi_official': 'MANDI OFFICIAL',
                'government': 'GOVERNMENT',
                'certification_body': 'CERTIFICATION BODY',
                // Farmer Registration Fields
                'farmer_registration_title': 'üåæ Complete Farmer Registration',
                'full_name_label': 'Full Name',
                'full_name_placeholder': 'Enter your full name',
                'phone_label': 'Phone Number',
                'phone_placeholder': 'Enter 10-digit phone number',
                'email_label': 'Email Address',
                'email_placeholder': 'Enter your email address',
                'aadhaar_label': 'Aadhaar Number',
                'aadhaar_placeholder': 'Enter 12-digit Aadhaar number',
                'pan_label': 'PAN Card Number',
                'pan_placeholder': 'Enter PAN card number',
                'farm_location_label': 'Farm Location',
                'farm_location_placeholder': 'Village, District, State',
                'farm_size_label': 'Farm Size (in acres)',
                'farm_size_placeholder': 'Enter farm size in acres',
                'bank_account_label': 'Bank Account Number',
                'bank_account_placeholder': 'Enter bank account number',
                'ifsc_label': 'IFSC Code',
                'ifsc_placeholder': 'Enter IFSC code',
                'crop_types_label': 'Primary Crop Types',
                'farming_type_label': 'Farming Type',
                'upload_aadhaar_label': 'Upload Aadhaar Card',
                'upload_pan_label': 'Upload PAN Card',
                'upload_land_label': 'Upload Land Records',
                'submit_registration': 'Submit for AI Verification',
                'select_crops': 'Select primary crops',
                'rice': 'Rice',
                'wheat': 'Wheat',
                'tomato': 'Tomato',
                'onion': 'Onion',
                'potato': 'Potato',
                'cotton': 'Cotton',
                'select_farming_type': 'Select farming type',
                'organic': 'Organic Farming',
                'conventional': 'Conventional Farming',
                'mixed': 'Mixed Farming',
                'demo_banner': 'üåæ Complete Agricultural Ecosystem ‚Ä¢ All Stakeholders Connected ‚Ä¢ Live Blockchain Integration',
                'dashboard': 'Dashboard',
                'functions': 'Functions',
                'profile': 'Profile',
                'settings': 'Settings',
                'analytics': 'Analytics',
                'reports': 'Reports',
                'open_dashboard': 'Open Dashboard',
                'view_details': 'View Details'
            },
            'hi': {
                'app_title': 'üåæ ‡§´‡§æ‡§∞‡•ç‡§Æ‡§ü‡•ç‡§∞‡•á‡§∏',
                'app_subtitle': '‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§®-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§ï‡•É‡§∑‡§ø ‡§Ü‡§™‡•Ç‡§∞‡•ç‡§§‡§ø ‡§∂‡•ç‡§∞‡•É‡§Ç‡§ñ‡§≤‡§æ ‡§™‡•ç‡§≤‡•á‡§ü‡§´‡•â‡§∞‡•ç‡§Æ',
                'app_organization': '‡§ì‡§°‡§ø‡§∂‡§æ ‡§∏‡§∞‡§ï‡§æ‡§∞ ‚Ä¢ ‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•â‡§®‡§ø‡§ï‡•ç‡§∏ ‡§î‡§∞ ‡§Ü‡§à‡§ü‡•Ä ‡§µ‡§ø‡§≠‡§æ‡§ó',
                'farmer': '‡§ï‡§ø‡§∏‡§æ‡§®',
                'middleman': '‡§¨‡§ø‡§ö‡•å‡§≤‡§ø‡§Ø‡§æ',
                'field_agent': '‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•Ä‡§Ø ‡§è‡§ú‡•á‡§Ç‡§ü',
                'transporter': '‡§™‡§∞‡§ø‡§µ‡§π‡§®‡§ï‡§∞‡•ç‡§§‡§æ',
                'retailer': '‡§ñ‡•Å‡§¶‡§∞‡§æ ‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ',
                'consumer': '‡§â‡§™‡§≠‡•ã‡§ï‡•ç‡§§‡§æ',
                'corporate_buyer': '‡§ï‡•â‡§∞‡•ç‡§™‡•ã‡§∞‡•á‡§ü ‡§ñ‡§∞‡•Ä‡§¶‡§æ‡§∞',
                'bank': '‡§¨‡•à‡§Ç‡§ï',
                'mandi_official': '‡§Æ‡§Ç‡§°‡•Ä ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä',
                'government': '‡§∏‡§∞‡§ï‡§æ‡§∞',
                'certification_body': '‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§® ‡§®‡§ø‡§ï‡§æ‡§Ø',
                // Farmer Registration Fields
                'farmer_registration_title': 'üåæ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ï‡§ø‡§∏‡§æ‡§® ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£',
                'full_name_label': '‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ',
                'full_name_placeholder': '‡§Ö‡§™‡§®‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
                'phone_label': '‡§´‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞',
                'phone_placeholder': '10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§´‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
                'email_label': '‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡§æ',
                'email_placeholder': '‡§Ö‡§™‡§®‡§æ ‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
                'aadhaar_label': '‡§Ü‡§ß‡§æ‡§∞ ‡§®‡§Ç‡§¨‡§∞',
                'aadhaar_placeholder': '12 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Ü‡§ß‡§æ‡§∞ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
                'pan_label': '‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§®‡§Ç‡§¨‡§∞',
                'pan_placeholder': '‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
                'farm_location_label': '‡§ñ‡•á‡§§ ‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§®',
                'farm_location_placeholder': '‡§ó‡§æ‡§Ç‡§µ, ‡§ú‡§ø‡§≤‡§æ, ‡§∞‡§æ‡§ú‡•ç‡§Ø',
                'farm_size_label': '‡§ñ‡•á‡§§ ‡§ï‡§æ ‡§Ü‡§ï‡§æ‡§∞ (‡§è‡§ï‡§°‡§º ‡§Æ‡•á‡§Ç)',
                'farm_size_placeholder': '‡§è‡§ï‡§°‡§º ‡§Æ‡•á‡§Ç ‡§ñ‡•á‡§§ ‡§ï‡§æ ‡§Ü‡§ï‡§æ‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
                'bank_account_label': '‡§¨‡•à‡§Ç‡§ï ‡§ñ‡§æ‡§§‡§æ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ',
                'bank_account_placeholder': '‡§¨‡•à‡§Ç‡§ï ‡§ñ‡§æ‡§§‡§æ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
                'ifsc_label': '‡§Ü‡§à‡§è‡§´‡§è‡§∏‡§∏‡•Ä ‡§ï‡•ã‡§°',
                'ifsc_placeholder': '‡§Ü‡§à‡§è‡§´‡§è‡§∏‡§∏‡•Ä ‡§ï‡•ã‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç',
                'crop_types_label': '‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§´‡§∏‡§≤ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞',
                'farming_type_label': '‡§ñ‡•á‡§§‡•Ä ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞',
                'upload_aadhaar_label': '‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç',
                'upload_pan_label': '‡§™‡•à‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç',
                'upload_land_label': '‡§≠‡•Ç‡§Æ‡§ø ‡§Ö‡§≠‡§ø‡§≤‡•á‡§ñ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç',
                'submit_registration': 'AI ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç',
                'select_crops': '‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§´‡§∏‡§≤‡•á‡§Ç ‡§ö‡•Å‡§®‡•á‡§Ç',
                'rice': '‡§ö‡§æ‡§µ‡§≤',
                'wheat': '‡§ó‡•á‡§π‡•Ç‡§Ç',
                'tomato': '‡§ü‡§Æ‡§æ‡§ü‡§∞',
                'onion': '‡§™‡•ç‡§Ø‡§æ‡§ú',
                'potato': '‡§Ü‡§≤‡•Ç',
                'cotton': '‡§ï‡§™‡§æ‡§∏',
                'select_farming_type': '‡§ñ‡•á‡§§‡•Ä ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç',
                'organic': '‡§ú‡•à‡§µ‡§ø‡§ï ‡§ñ‡•á‡§§‡•Ä',
                'conventional': '‡§™‡§æ‡§∞‡§Ç‡§™‡§∞‡§ø‡§ï ‡§ñ‡•á‡§§‡•Ä',
                'mixed': '‡§Æ‡§ø‡§∂‡•ç‡§∞‡§ø‡§§ ‡§ñ‡•á‡§§‡•Ä',
                'demo_banner': 'üåæ ‡§∏‡§Ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ï‡•É‡§∑‡§ø ‡§™‡§æ‡§∞‡§ø‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§ï‡•Ä ‡§§‡§Ç‡§§‡•ç‡§∞ ‚Ä¢ ‡§∏‡§≠‡•Ä ‡§π‡§ø‡§§‡§ß‡§æ‡§∞‡§ï ‡§ú‡•Å‡§°‡§º‡•á ‚Ä¢ ‡§≤‡§æ‡§á‡§µ ‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§® ‡§è‡§ï‡•Ä‡§ï‡§∞‡§£',
                'dashboard': '‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°',
                'functions': '‡§ï‡§æ‡§∞‡•ç‡§Ø',
                'profile': '‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤',
                'settings': '‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏',
                'analytics': '‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',
                'reports': '‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü',
                'open_dashboard': '‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§ñ‡•ã‡§≤‡•á‡§Ç',
                'view_details': '‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡•á‡§ñ‡•á‡§Ç'
            },
            'or': {
                'app_title': 'üåæ ‡¨´‡¨æ‡¨∞‡≠ç‡¨Æ‡¨ü‡≠ç‡¨∞‡≠á‡¨∏‡≠ç',
                'app_subtitle': '‡¨¨‡≠ç‡¨≤‡¨ï‡¨ö‡≠á‡¨®‡≠ç-‡¨Ü‡¨ß‡¨æ‡¨∞‡¨ø‡¨§ ‡¨ï‡≠É‡¨∑‡¨ø ‡¨Ø‡≠ã‡¨ó‡¨æ‡¨£ ‡¨∂‡≠É‡¨ô‡≠ç‡¨ñ‡¨≥‡¨æ ‡¨™‡≠ç‡¨≤‡¨æ‡¨ü‡¨´‡¨∞‡≠ç‡¨Æ',
                'app_organization': '‡¨ì‡¨°‡¨º‡¨ø‡¨∂‡¨æ ‡¨∏‡¨∞‡¨ï‡¨æ‡¨∞ ‚Ä¢ ‡¨á‡¨≤‡≠á‡¨ï‡≠ç‡¨ü‡≠ç‡¨∞‡≠ã‡¨®‡¨ø‡¨ï‡≠ç‡¨∏ ‡¨è‡¨¨‡¨Ç ‡¨Ü‡¨á‡¨ü‡¨ø ‡¨¨‡¨ø‡¨≠‡¨æ‡¨ó',
                'farmer': '‡¨ï‡≠É‡¨∑‡¨ï',
                'middleman': '‡¨Æ‡¨ß‡≠ç‡≠ü‡¨∏‡≠ç‡¨•',
                'field_agent': '‡¨ï‡≠ç‡¨∑‡≠á‡¨§‡≠ç‡¨∞ ‡¨è‡¨ú‡≠á‡¨£‡≠ç‡¨ü',
                'transporter': '‡¨™‡¨∞‡¨ø‡¨¨‡¨π‡¨®‡¨ï‡¨æ‡¨∞‡≠Ä',
                'retailer': '‡¨ñ‡≠Å‡¨ö‡≠Å‡¨∞‡¨æ ‡¨¨‡¨ø‡¨ï‡≠ç‡¨∞‡≠á‡¨§‡¨æ',
                'consumer': '‡¨ó‡≠ç‡¨∞‡¨æ‡¨π‡¨ï',
                'corporate_buyer': '‡¨ï‡¨∞‡≠ç‡¨™‡≠ã‡¨∞‡≠á‡¨ü‡≠ç ‡¨ï‡≠ç‡¨∞‡≠á‡¨§‡¨æ',
                'bank': '‡¨¨‡≠ç‡≠ü‡¨æ‡¨ô‡≠ç‡¨ï',
                'mandi_official': '‡¨Æ‡¨£‡≠ç‡¨°‡¨ø ‡¨Ö‡¨ß‡¨ø‡¨ï‡¨æ‡¨∞‡≠Ä',
                'government': '‡¨∏‡¨∞‡¨ï‡¨æ‡¨∞',
                'certification_body': '‡¨™‡≠ç‡¨∞‡¨Æ‡¨æ‡¨£‡¨™‡¨§‡≠ç‡¨∞ ‡¨∏‡¨Ç‡¨∏‡≠ç‡¨•‡¨æ',
                // Farmer Registration Fields
                'farmer_registration_title': 'üåæ ‡¨∏‡¨Æ‡≠ç‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£ ‡¨ï‡≠É‡¨∑‡¨ï ‡¨™‡¨û‡≠ç‡¨ú‡≠Ä‡¨ï‡¨∞‡¨£',
                'full_name_label': '‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£ ‡¨®‡¨æ‡¨Æ',
                'full_name_placeholder': '‡¨Ü‡¨™‡¨£‡¨ô‡≠ç‡¨ï‡¨∞ ‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£ ‡¨®‡¨æ‡¨Æ ‡¨≤‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å',
                'phone_label': '‡¨´‡≠ã‡¨®‡≠ç ‡¨®‡¨Æ‡≠ç‡¨¨‡¨∞',
                'phone_placeholder': '10 ‡¨Ö‡¨ô‡≠ç‡¨ï‡¨∞ ‡¨´‡≠ã‡¨®‡≠ç ‡¨®‡¨Æ‡≠ç‡¨¨‡¨∞ ‡¨≤‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å',
                'email_label': '‡¨á‡¨Æ‡≠á‡¨≤‡≠ç ‡¨†‡¨ø‡¨ï‡¨£‡¨æ',
                'email_placeholder': '‡¨Ü‡¨™‡¨£‡¨ô‡≠ç‡¨ï‡¨∞ ‡¨á‡¨Æ‡≠á‡¨≤‡≠ç ‡¨†‡¨ø‡¨ï‡¨£‡¨æ ‡¨≤‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å',
                'aadhaar_label': '‡¨Ü‡¨ß‡¨æ‡¨∞ ‡¨®‡¨Æ‡≠ç‡¨¨‡¨∞',
                'aadhaar_placeholder': '12 ‡¨Ö‡¨ô‡≠ç‡¨ï‡¨∞ ‡¨Ü‡¨ß‡¨æ‡¨∞ ‡¨®‡¨Æ‡≠ç‡¨¨‡¨∞ ‡¨≤‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å',
                'pan_label': '‡¨™‡≠ç‡≠ü‡¨æ‡¨®‡≠ç ‡¨ï‡¨æ‡¨∞‡≠ç‡¨° ‡¨®‡¨Æ‡≠ç‡¨¨‡¨∞',
                'pan_placeholder': '‡¨™‡≠ç‡≠ü‡¨æ‡¨®‡≠ç ‡¨ï‡¨æ‡¨∞‡≠ç‡¨° ‡¨®‡¨Æ‡≠ç‡¨¨‡¨∞ ‡¨≤‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å',
                'farm_location_label': '‡¨ö‡¨æ‡¨∑ ‡¨∏‡≠ç‡¨•‡¨æ‡¨®',
                'farm_location_placeholder': '‡¨ó‡¨æ‡¨Å, ‡¨ú‡¨ø‡¨≤‡≠ç‡¨≤‡¨æ, ‡¨∞‡¨æ‡¨ú‡≠ç‡≠ü',
                'farm_size_label': '‡¨ö‡¨æ‡¨∑ ‡¨Ü‡¨ï‡¨æ‡¨∞ (‡¨è‡¨ï‡¨∞‡¨∞‡≠á)',
                'farm_size_placeholder': '‡¨è‡¨ï‡¨∞‡¨∞‡≠á ‡¨ö‡¨æ‡¨∑ ‡¨Ü‡¨ï‡¨æ‡¨∞ ‡¨≤‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å',
                'bank_account_label': '‡¨¨‡≠ç‡≠ü‡¨æ‡¨ô‡≠ç‡¨ï ‡¨ñ‡¨æ‡¨§‡¨æ ‡¨®‡¨Æ‡≠ç‡¨¨‡¨∞',
                'bank_account_placeholder': '‡¨¨‡≠ç‡≠ü‡¨æ‡¨ô‡≠ç‡¨ï ‡¨ñ‡¨æ‡¨§‡¨æ ‡¨®‡¨Æ‡≠ç‡¨¨‡¨∞ ‡¨≤‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å',
                'ifsc_label': 'IFSC ‡¨ï‡≠ã‡¨°‡≠ç',
                'ifsc_placeholder': 'IFSC ‡¨ï‡≠ã‡¨°‡≠ç ‡¨≤‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å',
                'crop_types_label': '‡¨Æ‡≠Å‡¨ñ‡≠ç‡≠ü ‡¨´‡¨∏‡¨≤ ‡¨™‡≠ç‡¨∞‡¨ï‡¨æ‡¨∞',
                'farming_type_label': '‡¨ö‡¨æ‡¨∑ ‡¨™‡≠ç‡¨∞‡¨ï‡¨æ‡¨∞',
                'upload_aadhaar_label': '‡¨Ü‡¨ß‡¨æ‡¨∞ ‡¨ï‡¨æ‡¨∞‡≠ç‡¨° ‡¨Ö‡¨™‡¨≤‡≠ã‡¨°‡≠ç ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å',
                'upload_pan_label': '‡¨™‡≠ç‡≠ü‡¨æ‡¨®‡≠ç ‡¨ï‡¨æ‡¨∞‡≠ç‡¨° ‡¨Ö‡¨™‡¨≤‡≠ã‡¨°‡≠ç ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å',
                'upload_land_label': '‡¨ú‡¨Æ‡¨ø ‡¨∞‡≠á‡¨ï‡¨∞‡≠ç‡¨° ‡¨Ö‡¨™‡¨≤‡≠ã‡¨°‡≠ç ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å',
                'submit_registration': 'AI ‡¨Ø‡¨æ‡¨û‡≠ç‡¨ö ‡¨™‡¨æ‡¨á‡¨Å ‡¨¶‡¨æ‡¨ñ‡¨≤ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å',
                'select_crops': '‡¨Æ‡≠Å‡¨ñ‡≠ç‡≠ü ‡¨´‡¨∏‡¨≤ ‡¨¨‡¨æ‡¨õ‡¨®‡≠ç‡¨§‡≠Å',
                'rice': '‡¨ö‡¨æ‡¨â‡¨≥',
                'wheat': '‡¨ó‡¨π‡¨Æ',
                'tomato': '‡¨ü‡¨Æ‡¨æ‡¨ü‡≠ã',
                'onion': '‡¨™‡¨ø‡¨Ü‡¨ú',
                'potato': '‡¨Ü‡¨≥‡≠Å',
                'cotton': '‡¨ï‡¨™‡¨æ',
                'select_farming_type': '‡¨ö‡¨æ‡¨∑ ‡¨™‡≠ç‡¨∞‡¨ï‡¨æ‡¨∞ ‡¨¨‡¨æ‡¨õ‡¨®‡≠ç‡¨§‡≠Å',
                'organic': '‡¨ú‡≠à‡¨¨‡¨ø‡¨ï ‡¨ö‡¨æ‡¨∑',
                'conventional': '‡¨™‡¨æ‡¨∞‡¨Æ‡≠ç‡¨™‡¨∞‡¨ø‡¨ï ‡¨ö‡¨æ‡¨∑',
                'mixed': '‡¨Æ‡¨ø‡¨∂‡≠ç‡¨∞‡¨ø‡¨§ ‡¨ö‡¨æ‡¨∑',
                'demo_banner': 'üåæ ‡¨∏‡¨Æ‡≠ç‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£ ‡¨ï‡≠É‡¨∑‡¨ø ‡¨™‡¨∞‡¨ø‡¨¨‡≠á‡¨∂ ‡¨§‡¨®‡≠ç‡¨§‡≠ç‡¨∞ ‚Ä¢ ‡¨∏‡¨Æ‡¨∏‡≠ç‡¨§ ‡¨Ö‡¨Ç‡¨∂‡≠Ä‡¨¶‡¨æ‡¨∞ ‡¨∏‡¨Ç‡¨Ø‡≠Å‡¨ï‡≠ç‡¨§ ‚Ä¢ ‡¨≤‡¨æ‡¨á‡¨≠‡≠ç ‡¨¨‡≠ç‡¨≤‡¨ï‡¨ö‡≠á‡¨®‡≠ç ‡¨è‡¨ï‡≠Ä‡¨ï‡¨∞‡¨£',
                'dashboard': '‡¨°‡≠ç‡≠ü‡¨æ‡¨∏‡¨¨‡≠ã‡¨∞‡≠ç‡¨°',
                'functions': '‡¨ï‡¨æ‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü',
                'profile': '‡¨™‡≠ç‡¨∞‡≠ã‡¨´‡¨æ‡¨á‡¨≤',
                'settings': '‡¨∏‡≠á‡¨ü‡¨ø‡¨Ç‡¨∏',
                'analytics': '‡¨¨‡¨ø‡¨∂‡≠ç‡¨≥‡≠á‡¨∑‡¨£',
                'reports': '‡¨∞‡¨ø‡¨™‡≠ã‡¨∞‡≠ç‡¨ü',
                'open_dashboard': '‡¨°‡≠ç‡≠ü‡¨æ‡¨∏‡¨¨‡≠ã‡¨∞‡≠ç‡¨° ‡¨ñ‡≠ã‡¨≤‡¨®‡≠ç‡¨§‡≠Å',
                'view_details': '‡¨¨‡¨ø‡¨¨‡¨∞‡¨£‡≠Ä ‡¨¶‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å'
            }
        };

        const welcomeMessages = {
            'en': 'Welcome to FarmTrace blockchain agricultural platform. All features are fully functional with real data integration. Choose any user type to explore.',
            'hi': '‡§´‡§æ‡§∞‡•ç‡§Æ‡§ü‡•ç‡§∞‡•á‡§∏ ‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§® ‡§ï‡•É‡§∑‡§ø ‡§™‡•ç‡§≤‡•á‡§ü‡§´‡•â‡§∞‡•ç‡§Æ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à‡•§ ‡§∏‡§≠‡•Ä ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ‡§è‡§Ç ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§°‡•á‡§ü‡§æ ‡§è‡§ï‡•Ä‡§ï‡§∞‡§£ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§™‡•Ç‡§∞‡•ç‡§£‡§§‡§É ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§∂‡•Ä‡§≤ ‡§π‡•à‡§Ç‡•§ ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•ã ‡§ö‡•Å‡§®‡•á‡§Ç‡•§',
            'or': '‡¨´‡¨æ‡¨∞‡≠ç‡¨Æ‡¨ü‡≠ç‡¨∞‡≠á‡¨∏‡≠ç ‡¨¨‡≠ç‡¨≤‡¨ï‡¨ö‡≠á‡¨®‡≠ç ‡¨ï‡≠É‡¨∑‡¨ø ‡¨™‡≠ç‡¨≤‡¨æ‡¨ü‡¨´‡¨∞‡≠ç‡¨Æ‡¨ï‡≠Å ‡¨∏‡≠ç‡≠±‡¨æ‡¨ó‡¨§‡•§ ‡¨∏‡¨Æ‡¨∏‡≠ç‡¨§ ‡¨¨‡≠à‡¨∂‡¨ø‡¨∑‡≠ç‡¨ü‡≠ç‡≠ü ‡¨™‡≠ç‡¨∞‡¨ï‡≠É‡¨§ ‡¨§‡¨•‡≠ç‡≠ü ‡¨è‡¨ï‡≠Ä‡¨ï‡¨∞‡¨£ ‡¨∏‡¨π‡¨ø‡¨§ ‡¨∏‡¨Æ‡≠ç‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£ ‡¨ï‡¨æ‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠ç‡¨∑‡¨Æ‡•§ ‡¨ï‡≠å‡¨£‡¨∏‡¨ø ‡¨â‡¨™‡¨Ø‡≠ã‡¨ó‡¨ï‡¨∞‡≠ç‡¨§‡≠ç‡¨§‡¨æ ‡¨™‡≠ç‡¨∞‡¨ï‡¨æ‡¨∞ ‡¨Ö‡¨®‡≠ç‡≠±‡≠á‡¨∑‡¨£ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§'
        };

        function changeLanguage() {
            currentLanguage = document.getElementById('languageSelector').value;
            localStorage.setItem('farmtrace_language', currentLanguage);

            // Update all translatable elements
            updateTranslations();

            // Speak welcome message in new language
            if (voiceMode) {
                speakText(welcomeMessages[currentLanguage] || welcomeMessages['en']);
            }
        }

        function updateTranslations() {
            const currentTranslations = translations[currentLanguage] || translations['en'];

            // Update header elements
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (currentTranslations[key]) {
                    if (element.tagName === 'INPUT') {
                        element.placeholder = currentTranslations[key];
                    } else {
                        element.innerHTML = currentTranslations[key];
                    }
                }
            });

            // Update user type cards and all their content
            document.querySelectorAll('.user-card h3').forEach((element, index) => {
                const userTypes = ['farmer', 'middleman', 'field_agent', 'transporter', 'retailer', 'consumer', 'corporate_buyer', 'bank', 'mandi_official', 'government', 'certification_body'];
                if (userTypes[index] && currentTranslations[userTypes[index]]) {
                    element.textContent = currentTranslations[userTypes[index]];
                }
            });

            // Update all text elements in dashboards and UI
            document.querySelectorAll('h4, h5, p, label, button, span').forEach(element => {
                if (element.textContent) {
                    const text = element.textContent.trim();
                    // Translate common UI elements
                    const commonTranslations = {
                        'Dashboard': currentTranslations['dashboard'] || 'Dashboard',
                        'Functions': currentTranslations['functions'] || 'Functions',
                        'Profile': currentTranslations['profile'] || 'Profile',
                        'Settings': currentTranslations['settings'] || 'Settings',
                        'Analytics': currentTranslations['analytics'] || 'Analytics',
                        'Reports': currentTranslations['reports'] || 'Reports',
                        'Open Dashboard': currentTranslations['open_dashboard'] || 'Open Dashboard',
                        'View Details': currentTranslations['view_details'] || 'View Details'
                    };

                    if (commonTranslations[text]) {
                        element.textContent = commonTranslations[text];
                    }
                }
            });
        }

        function toggleVoiceMode() {
            voiceMode = !voiceMode;
            const voiceBtn = document.getElementById('voiceToggle');

            if (voiceMode) {
                voiceBtn.style.background = '#dc3545';
                voiceBtn.innerHTML = 'üî¥ Voice ON';
                speakText(welcomeMessages[currentLanguage] || welcomeMessages['en']);
            } else {
                voiceBtn.style.background = 'rgba(255, 255, 255, 0.2)';
                voiceBtn.innerHTML = 'üé§ Voice';
                speechSynthesis.cancel();
            }
        }

        function speakText(text) {
            if (!voiceMode || !text) return;

            // Cancel any ongoing speech
            speechSynthesis.cancel();

            // Check if speech synthesis is supported
            if (!('speechSynthesis' in window)) {
                console.log('Speech synthesis not supported');
                return;
            }

            const utterance = new SpeechSynthesisUtterance(text);

            // Enhanced voice synthesis with better Odia support
            const voiceLangMap = {
                'en': 'en-IN',
                'hi': 'hi-IN',
                'or': 'hi-IN' // Use Hindi voice for Odia since or-IN is not widely supported
            };

            utterance.lang = voiceLangMap[currentLanguage] || 'en-IN';
            utterance.rate = 0.7; // Slower for better pronunciation
            utterance.volume = 1.0;

            // For Odia, ensure the text is properly formatted
            if (currentLanguage === 'or') {
                // Add phonetic hints for better Odia pronunciation
                utterance.rate = 0.6;
                utterance.pitch = 1.1;
                console.log('Speaking Odia text:', text);
            }

            // Add some error handling
            utterance.onerror = function(event) {
                console.log('Speech synthesis error:', event.error);
            };

            speechSynthesis.speak(utterance);
        }

        // Enhanced user switching with voice feedback
        function switchUserWithVoice(userType, element) {
            switchUser(userType, element);

            if (voiceMode) {
                const userNames = {
                    'FARMER': { en: 'Farmer dashboard loaded', hi: '‡§ï‡§ø‡§∏‡§æ‡§® ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü', or: '‡¨ï‡≠É‡¨∑‡¨ï ‡¨°‡≠ç‡≠ü‡¨æ‡¨∏‡¨¨‡≠ã‡¨∞‡≠ç‡¨° ‡¨≤‡≠ã‡¨°‡≠ç ‡¨π‡≠ã‡¨á‡¨õ‡¨ø' },
                    'MIDDLEMAN': { en: 'Middleman dashboard loaded', hi: '‡§¨‡§ø‡§ö‡•å‡§≤‡§ø‡§Ø‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü', or: '‡¨Æ‡¨ß‡≠ç‡≠ü‡¨∏‡≠ç‡¨• ‡¨°‡≠ç‡≠ü‡¨æ‡¨∏‡¨¨‡≠ã‡¨∞‡≠ç‡¨° ‡¨≤‡≠ã‡¨°‡≠ç ‡¨π‡≠ã‡¨á‡¨õ‡¨ø' },
                    'FIELD_AGENT': { en: 'Field agent dashboard loaded', hi: '‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•Ä‡§Ø ‡§è‡§ú‡•á‡§Ç‡§ü ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü', gu: '‡™ï‡´ç‡™∑‡´á‡™§‡´ç‡™∞‡´Ä‡™Ø ‡™è‡™ú‡™®‡´ç‡™ü ‡™°‡´á‡™∂‡™¨‡´ã‡™∞‡´ç‡™° ‡™≤‡´ã‡™° ‡™•‡™Ø‡´Å‡™Ç' },
                    'TRANSPORTER': { en: 'Transporter dashboard loaded', hi: '‡§™‡§∞‡§ø‡§µ‡§π‡§®‡§ï‡§∞‡•ç‡§§‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü', gu: '‡™™‡™∞‡™ø‡™µ‡™π‡™®‡™ï‡™∞‡´ç‡™§‡™æ ‡™°‡´á‡™∂‡™¨‡´ã‡™∞‡´ç‡™° ‡™≤‡´ã‡™° ‡™•‡™Ø‡´Å‡™Ç' },
                    'RETAILER': { en: 'Retailer dashboard loaded', hi: '‡§ñ‡•Å‡§¶‡§∞‡§æ ‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü', gu: '‡™∞‡™ø‡™ü‡´á‡™≤‡™∞ ‡™°‡´á‡™∂‡™¨‡´ã‡™∞‡´ç‡™° ‡™≤‡´ã‡™° ‡™•‡™Ø‡´Å‡™Ç' },
                    'CONSUMER': { en: 'Consumer dashboard loaded', hi: '‡§â‡§™‡§≠‡•ã‡§ï‡•ç‡§§‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü', gu: '‡™ó‡´ç‡™∞‡™æ‡™π‡™ï ‡™°‡´á‡™∂‡™¨‡´ã‡™∞‡´ç‡™° ‡™≤‡´ã‡™° ‡™•‡™Ø‡´Å‡™Ç' },
                    'CORPORATE_BUYER': { en: 'Corporate buyer dashboard loaded', hi: '‡§ï‡•â‡§∞‡•ç‡§™‡•ã‡§∞‡•á‡§ü ‡§ñ‡§∞‡•Ä‡§¶‡§æ‡§∞ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü', gu: '‡™ï‡´ã‡™∞‡´ç‡™™‡´ã‡™∞‡´á‡™ü ‡™ñ‡™∞‡´Ä‡™¶‡™¶‡™æ‡™∞ ‡™°‡´á‡™∂‡™¨‡´ã‡™∞‡´ç‡™° ‡™≤‡´ã‡™° ‡™•‡™Ø‡´Å‡™Ç' },
                    'BANK': { en: 'Bank dashboard loaded', hi: '‡§¨‡•à‡§Ç‡§ï ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü', gu: '‡™¨‡´á‡™Ç‡™ï ‡™°‡´á‡™∂‡™¨‡´ã‡™∞‡´ç‡™° ‡™≤‡´ã‡™° ‡™•‡™Ø‡´Å‡™Ç' },
                    'MANDI_OFFICIAL': { en: 'Mandi official dashboard loaded', hi: '‡§Æ‡§Ç‡§°‡•Ä ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü', gu: '‡™Æ‡™Ç‡™°‡´Ä ‡™Ö‡™ß‡™ø‡™ï‡™æ‡™∞‡´Ä ‡™°‡´á‡™∂‡™¨‡´ã‡™∞‡´ç‡™° ‡™≤‡´ã‡™° ‡™•‡™Ø‡´Å‡™Ç' },
                    'GOVERNMENT': { en: 'Government dashboard loaded', hi: '‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü', gu: '‡™∏‡™∞‡™ï‡™æ‡™∞‡´Ä ‡™°‡´á‡™∂‡™¨‡´ã‡™∞‡´ç‡™° ‡™≤‡´ã‡™° ‡™•‡™Ø‡´Å‡™Ç' },
                    'CERTIFICATION_BODY': { en: 'Certification body dashboard loaded', hi: '‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§® ‡§®‡§ø‡§ï‡§æ‡§Ø ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü', gu: '‡™™‡´ç‡™∞‡™Æ‡™æ‡™£‡™™‡™§‡´ç‡™∞ ‡™∏‡™Ç‡™∏‡´ç‡™•‡™æ ‡™°‡´á‡™∂‡™¨‡´ã‡™∞‡´ç‡™° ‡™≤‡´ã‡™° ‡™•‡™Ø‡´Å‡™Ç' }
                };

                const message = userNames[userType] && userNames[userType][currentLanguage] || userNames[userType]['en'] || `${userType} dashboard loaded`;
                setTimeout(() => speakText(message), 500);
            }
        }

        // Enhanced simulation functions with voice feedback
        function simulateKYCWithVoice() {
            simulateKYC();
            if (voiceMode) {
                const messages = {
                    'en': 'KYC verification completed successfully',
                    'hi': '‡§ï‡•á‡§µ‡§æ‡§à‡§∏‡•Ä ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§® ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü',
                    'gu': 'KYC ‡™ö‡™ï‡™æ‡™∏‡™£‡´Ä ‡™∏‡™´‡™≥‡™§‡™æ‡™™‡´Ç‡™∞‡´ç‡™µ‡™ï ‡™™‡´Ç‡™∞‡´ç‡™£ ‡™•‡™Ø‡´Å‡™Ç'
                };
                setTimeout(() => speakText(messages[currentLanguage] || messages['en']), 1000);
            }
        }

        function analyzePriceWithVoice() {
            analyzePrice();
            if (voiceMode) {
                const messages = {
                    'en': 'Price analysis completed. Current price is optimal.',
                    'hi': '‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü‡•§ ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§á‡§∑‡•ç‡§ü‡§§‡§Æ ‡§π‡•à‡•§',
                    'gu': '‡™ï‡™ø‡™Ç‡™Æ‡™§ ‡™µ‡™ø‡™∂‡´ç‡™≤‡´á‡™∑‡™£ ‡™™‡´Ç‡™∞‡´ç‡™£ ‡™•‡™Ø‡´Å‡™Ç‡•§ ‡™µ‡™∞‡´ç‡™§‡™Æ‡™æ‡™® ‡™ï‡™ø‡™Ç‡™Æ‡™§ ‡™Ø‡´ã‡™ó‡´ç‡™Ø ‡™õ‡´á‡•§'
                };
                setTimeout(() => speakText(messages[currentLanguage] || messages['en']), 1000);
            }
        }

        // Initialize language settings
        function initializeLanguageSettings() {
            const savedLanguage = localStorage.getItem('farmtrace_language') || 'en';
            currentLanguage = savedLanguage;
            document.getElementById('languageSelector').value = savedLanguage;
            updateTranslations();
        }

        // Update the main initialization
        function initializePage() {
            createUserGrid();
            displayUserDashboard('FARMER');
            initializeLanguageSettings();

            // Update user card click handlers to include voice
            document.querySelectorAll('.user-card').forEach((card, index) => {
                const userTypes = ['FARMER', 'MIDDLEMAN', 'FIELD_AGENT', 'TRANSPORTER', 'RETAILER', 'CONSUMER', 'CORPORATE_BUYER', 'BANK', 'MANDI_OFFICIAL', 'GOVERNMENT', 'CERTIFICATION_BODY'];
                card.onclick = function() {
                    switchUserWithVoice(userTypes[index], this);
                };
            });

            // Welcome message after page loads
            setTimeout(() => {
                if (voiceMode) {
                    speakText(welcomeMessages[currentLanguage] || welcomeMessages['en']);
                }
            }, 2000);
        }

        // Marketplace Functions
        function contactMiddleman(middlemanName) {
            document.getElementById('contact-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>üìû Contacting ${middlemanName}</strong><br>
                    Connection established via WhatsApp: +91-98765-43210<br>
                    <small>Message sent: "Hi, I have produce available for sale. Let's discuss terms."</small><br><br>
                    <strong>Response from ${middlemanName}:</strong><br>
                    "Hello! I'm interested. Can you send photos and quantity details? I can offer competitive rates."
                </div>
            `;
            speakInCurrentLanguage(`Contact established with ${middlemanName}`, `${middlemanName} ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§π‡•Å‡§Ü`);
        }

        function sendQuote(middlemanName) {
            document.getElementById('contact-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>üìã Quote Sent to ${middlemanName}</strong><br>
                    Product: Organic Tomatoes<br>
                    Quantity: 500kg<br>
                    Your Quote: ‚Çπ46/kg<br>
                    Total Value: ‚Çπ23,000<br><br>
                    <strong>Status:</strong> Quote sent successfully<br>
                    Expected response time: 2-3 hours<br>
                    <button class="btn btn-info" style="margin-top: 10px;">Track Quote Status</button>
                </div>
            `;
            speakInCurrentLanguage('Quote sent successfully', '‡§ï‡•ã‡§ü‡•á‡§∂‡§® ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§≠‡•á‡§ú‡§æ ‡§ó‡§Ø‡§æ');
        }

        function contactFarmer(farmerName) {
            document.getElementById('farmer-contact-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>üìû Contacting ${farmerName}</strong><br>
                    Connection established via phone: +91-87654-32109<br>
                    <small>Automated message sent: "Hello, I'm interested in purchasing your produce. Please confirm availability."</small><br><br>
                    <strong>Response from ${farmerName}:</strong><br>
                    "Namaste ji! Yes, produce is available. Fresh harvest, Grade A quality. When do you want to pick up?"
                </div>
            `;
            speakInCurrentLanguage(`Contact established with farmer ${farmerName}`, `‡§ï‡§ø‡§∏‡§æ‡§® ${farmerName} ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§π‡•Å‡§Ü`);
        }

        function makeOffer(farmerName) {
            document.getElementById('farmer-contact-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>üí∞ Offer Made to ${farmerName}</strong><br>
                    Product: Fresh Tomatoes<br>
                    Quantity: 500kg<br>
                    Your Offer: ‚Çπ45/kg<br>
                    Total: ‚Çπ22,500<br>
                    Transport: Included<br><br>
                    <strong>Status:</strong> Offer submitted and accepted!<br>
                    Pickup scheduled for tomorrow 8:00 AM<br>
                    <button class="btn btn-success" style="margin-top: 10px;">Generate Purchase Order</button>
                </div>
            `;
            speakInCurrentLanguage('Offer accepted by farmer', '‡§ï‡§ø‡§∏‡§æ‡§® ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ');
        }

        function filterMiddlemen() {
            const product = document.getElementById('productFilter')?.value;
            const quantity = document.getElementById('farmerQuantity')?.value;

            if (product && quantity) {
                // Simple filtering simulation
                let message = `Showing middlemen for ${product} (${quantity}kg)`;
                if (voiceMode) {
                    speakInCurrentLanguage(`Filtering middlemen for ${product}`, `${product} ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡§ß‡•ç‡§Ø‡§∏‡•ç‡§•‡•ã‡§Ç ‡§ï‡•ã ‡§´‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç`);
                }
            }
        }

        function filterFarmers() {
            const product = document.getElementById('productNeeded')?.value;
            const quantity = document.getElementById('quantityNeeded')?.value;

            if (product && quantity) {
                // Simple filtering simulation
                let message = `Showing farmers with ${product} (${quantity}kg needed)`;
                if (voiceMode) {
                    speakInCurrentLanguage(`Filtering farmers for ${product}`, `${product} ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§´‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç`);
                }
            }
        }

        function startVoiceInput(inputElement, fieldType) {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                alert('Speech recognition not supported');
                return;
            }

            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.continuous = false;
            recognition.interimResults = false;

            // Set language
            const currentLang = document.getElementById('languageSelector').value;
            recognition.lang = currentLang === 'hi' ? 'hi-IN' : currentLang === 'or' ? 'or-IN' : 'en-IN';

            recognition.start();

            recognition.onresult = function(event) {
                const result = event.results[0][0].transcript;
                inputElement.value = result;

                if (voiceMode) {
                    speakInCurrentLanguage(`Input captured: ${result}`, `‡§á‡§®‡§™‡•Å‡§ü ‡§ï‡•à‡§™‡•ç‡§ö‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ: ${result}`);
                }
            };

            recognition.onerror = function(event) {
                console.log('Speech recognition error:', event.error);
            };
        }

        function downloadCertificate() {
            const certificateData = {
                productId: 'FARM001-' + Date.now().toString().slice(-4),
                farmerName: 'Rajesh Kumar',
                farmLocation: 'Village Khetpur, Odisha',
                productName: 'Organic Tomatoes',
                quantity: '500kg',
                qualityGrade: 'Grade A+',
                harvestDate: new Date(Date.now() - 6*24*60*60*1000).toLocaleDateString(),
                blockchainHash: '0x' + Math.random().toString(16).substr(2, 16),
                certificationDate: new Date().toLocaleDateString(),
                qrVerified: true,
                organicCertified: true
            };

            const certificateHTML = `
                <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; border: 2px solid #2d5a27; border-radius: 10px;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <h1 style="color: #2d5a27; margin: 0;">üåæ FarmTrace</h1>
                        <h2 style="color: #666; margin: 5px 0;">Blockchain Traceability Certificate</h2>
                        <p style="color: #888; margin: 0;">Government of Odisha ‚Ä¢ Electronics & IT Department</p>
                    </div>

                    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 15px 0;">
                        <h3 style="color: #2d5a27; margin-top: 0;">Product Information</h3>
                        <p><strong>Product:</strong> ${certificateData.productName}</p>
                        <p><strong>Quantity:</strong> ${certificateData.quantity}</p>
                        <p><strong>Quality Grade:</strong> ${certificateData.qualityGrade}</p>
                        <p><strong>Harvest Date:</strong> ${certificateData.harvestDate}</p>
                        <p><strong>Product ID:</strong> ${certificateData.productId}</p>
                    </div>

                    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin: 15px 0;">
                        <h3 style="color: #2d5a27; margin-top: 0;">Farmer Details</h3>
                        <p><strong>Farmer:</strong> ${certificateData.farmerName}</p>
                        <p><strong>Location:</strong> ${certificateData.farmLocation}</p>
                        <p><strong>Organic Certified:</strong> ${certificateData.organicCertified ? '‚úÖ Yes (NPOP Certified)' : '‚ùå No'}</p>
                    </div>

                    <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin: 15px 0;">
                        <h3 style="color: #2d5a27; margin-top: 0;">Blockchain Verification</h3>
                        <p><strong>Blockchain Hash:</strong> ${certificateData.blockchainHash}</p>
                        <p><strong>QR Verified:</strong> ${certificateData.qrVerified ? '‚úÖ Verified' : '‚ùå Not Verified'}</p>
                        <p><strong>Certification Date:</strong> ${certificateData.certificationDate}</p>
                    </div>

                    <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd;">
                        <p style="color: #666; font-size: 12px;">This certificate is digitally signed and verified on blockchain.<br>Visit farmtrace.gov.in to verify authenticity.</p>
                        <p style="color: #888; font-size: 10px; margin-top: 10px;">Generated on ${new Date().toLocaleString()}</p>
                    </div>
                </div>
            `;

            // Create and download as PDF-like HTML
            const blob = new Blob([certificateHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `FarmTrace_Certificate_${certificateData.productId}.html`;
            link.click();
            URL.revokeObjectURL(url);

            const messages = {
                'en': 'Traceability certificate downloaded successfully.',
                'hi': '‡§ü‡•ç‡§∞‡•á‡§∏‡•á‡§¨‡§ø‡§≤‡§ø‡§ü‡•Ä ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü‡•§',
                'or': '‡¨ü‡≠ç‡¨∞‡≠á‡¨∏‡≠á‡¨¨‡¨ø‡¨≤‡¨ø‡¨ü‡¨ø ‡¨™‡≠ç‡¨∞‡¨Æ‡¨æ‡¨£‡¨™‡¨§‡≠ç‡¨∞ ‡¨∏‡¨´‡¨≥‡¨§‡¨æ‡¨∞ ‡¨∏‡¨π‡¨ø‡¨§ ‡¨°‡¨æ‡¨â‡¨®‡¨≤‡≠ã‡¨°‡≠ç ‡¨π‡≠ã‡¨á‡¨õ‡¨ø‡•§'
            };

            if (voiceMode) {
                speakText(messages[currentLanguage] || messages['en']);
            }
        }

        function shareTraceability() {
            const shareData = {
                title: 'FarmTrace Product Journey',
                text: 'Check out this complete blockchain-verified product journey from farm to consumer!',
                url: window.location.href + '#traceability_shared'
            };

            if (navigator.share) {
                navigator.share(shareData).then(() => {
                    console.log('Successfully shared');
                }).catch((error) => {
                    console.log('Error sharing:', error);
                });
            } else {
                // Fallback for browsers that don't support navigator.share
                const shareText = `${shareData.title}\\n${shareData.text}\\n${shareData.url}`;
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('Share link copied to clipboard!');
                });
            }

            const messages = {
                'en': 'Product traceability information shared successfully.',
                'hi': '‡§â‡§§‡•ç‡§™‡§æ‡§¶ ‡§ü‡•ç‡§∞‡•á‡§∏‡•á‡§¨‡§ø‡§≤‡§ø‡§ü‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡§æ‡§ù‡§æ ‡§ï‡•Ä ‡§ó‡§à‡•§',
                'or': '‡¨â‡¨§‡≠ç‡¨™‡¨æ‡¨¶ ‡¨ü‡≠ç‡¨∞‡≠á‡¨∏‡≠á‡¨¨‡¨ø‡¨≤‡¨ø‡¨ü‡¨ø ‡¨∏‡≠Ç‡¨ö‡¨®‡¨æ ‡¨∏‡¨´‡¨≥‡¨§‡¨æ‡¨∞ ‡¨∏‡¨π‡¨ø‡¨§ ‡¨∏‡¨æ‡¨ù‡¨æ ‡¨ï‡¨∞‡¨æ‡¨Ø‡¨æ‡¨á‡¨õ‡¨ø‡•§'
            };

            if (voiceMode) {
                speakText(messages[currentLanguage] || messages['en']);
            }
        }

        function speakInCurrentLanguage(englishText, hindiText, odiaText) {
            if (!voiceMode) return;

            let textToSpeak = englishText;
            if (currentLanguage === 'hi' && hindiText) {
                textToSpeak = hindiText;
            } else if (currentLanguage === 'or' && odiaText) {
                textToSpeak = odiaText;
            }

            // Enhanced voice synthesis for Odia
            if (currentLanguage === 'or') {
                // If Odia text not provided, provide a fallback
                if (!odiaText) {
                    const odiaTranslations = {
                        'Contact established': '‡¨Ø‡≠ã‡¨ó‡¨æ‡¨Ø‡≠ã‡¨ó ‡¨∏‡≠ç‡¨•‡¨æ‡¨™‡¨ø‡¨§ ‡¨π‡≠ã‡¨á‡¨õ‡¨ø',
                        'Quote sent successfully': '‡¨ï‡≠ã‡¨ü‡≠á‡¨∏‡¨®‡≠ç ‡¨∏‡¨´‡¨≥‡¨§‡¨æ‡¨∞ ‡¨∏‡¨π‡¨ø‡¨§ ‡¨™‡¨†‡¨æ‡¨Ø‡¨æ‡¨á‡¨õ‡¨ø',
                        'Offer accepted by farmer': '‡¨ï‡≠É‡¨∑‡¨ï‡¨ô‡≠ç‡¨ï ‡¨¶‡≠ç‡≠±‡¨æ‡¨∞‡¨æ ‡¨™‡≠ç‡¨∞‡¨∏‡≠ç‡¨§‡¨æ‡¨¨ ‡¨ó‡≠ç‡¨∞‡¨π‡¨£ ‡¨ï‡¨∞‡¨æ‡¨Ø‡¨æ‡¨á‡¨õ‡¨ø',
                        'Filtering middlemen': '‡¨Æ‡¨ß‡≠ç‡≠ü‡¨∏‡≠ç‡¨•‡¨Æ‡¨æ‡¨®‡¨ô‡≠ç‡¨ï‡≠Å ‡¨´‡¨ø‡¨≤‡≠ç‡¨ü‡¨∞ ‡¨ï‡¨∞‡≠Å‡¨õ‡¨®‡≠ç‡¨§‡¨ø',
                        'Filtering farmers': '‡¨ï‡≠É‡¨∑‡¨ï‡¨Æ‡¨æ‡¨®‡¨ô‡≠ç‡¨ï‡≠Å ‡¨´‡¨ø‡¨≤‡≠ç‡¨ü‡¨∞ ‡¨ï‡¨∞‡≠Å‡¨õ‡¨®‡≠ç‡¨§‡¨ø',
                        'Input captured': '‡¨á‡¨®‡¨™‡≠Å‡¨ü‡≠ç ‡¨ï‡≠ç‡≠ü‡¨æ‡¨™‡¨ö‡¨∞‡≠ç ‡¨π‡≠ã‡¨á‡¨õ‡¨ø'
                    };

                    // Try to find a suitable Odia translation
                    for (const [key, value] of Object.entries(odiaTranslations)) {
                        if (englishText.includes(key)) {
                            textToSpeak = englishText.replace(key, value);
                            break;
                        }
                    }
                }
            }

            speakText(textToSpeak);
        }

        function downloadQRCode(canvasId, filename) {
            const canvas = document.getElementById(canvasId);
            if (canvas) {
                const link = document.createElement('a');
                link.download = filename + '.png';
                link.href = canvas.toDataURL();
                link.click();

                const messages = {
                    'en': 'QR Code downloaded successfully',
                    'hi': 'QR ‡§ï‡•ã‡§° ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ',
                    'or': 'QR ‡¨ï‡≠ã‡¨°‡≠ç ‡¨∏‡¨´‡¨≥‡¨§‡¨æ‡¨∞ ‡¨∏‡¨π‡¨ø‡¨§ ‡¨°‡¨æ‡¨â‡¨®‡¨≤‡≠ã‡¨°‡≠ç ‡¨π‡≠ã‡¨á‡¨õ‡¨ø'
                };

                if (voiceMode) {
                    speakText(messages[currentLanguage] || messages['en']);
                }
            }
        }

        // Enhanced functions with multi-language support
        function enhancedSimulateKYC() {
            const messages = {
                'en': {
                    title: '‚úÖ AI KYC Verification Complete',
                    content: 'Document: Aadhaar Card verified<br>Identity: Rajesh Kumar Singh<br>Farm Location: Village Khetpur, Odisha (GPS Verified)<br>Organic Certification: Valid<br>Risk Score: Low (0.2/10)<br><strong>Status: APPROVED ‚úÖ</strong>',
                    speech: 'KYC verification completed successfully. All documents approved.'
                },
                'hi': {
                    title: '‚úÖ AI ‡§ï‡•á‡§µ‡§æ‡§à‡§∏‡•Ä ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§® ‡§™‡•Ç‡§∞‡•ç‡§£',
                    content: '‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º: ‡§Ü‡§ß‡§æ‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§<br>‡§™‡§π‡§ö‡§æ‡§®: ‡§∞‡§æ‡§ú‡•á‡§∂ ‡§ï‡•Å‡§Æ‡§æ‡§∞ ‡§∏‡§ø‡§Ç‡§π<br>‡§ñ‡•á‡§§ ‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§®: ‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§ñ‡•á‡§§‡§™‡•Å‡§∞, ‡§ì‡§°‡§ø‡§∂‡§æ (GPS ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§)<br>‡§ú‡•à‡§µ‡§ø‡§ï ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§®: ‡§µ‡•à‡§ß<br>‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§∏‡•ç‡§ï‡•ã‡§∞: ‡§ï‡§Æ (0.2/10)<br><strong>‡§∏‡•ç‡§•‡§ø‡§§‡§ø: ‡§∏‡•ç‡§µ‡•Ä‡§ï‡•É‡§§ ‚úÖ</strong>',
                    speech: '‡§ï‡•á‡§µ‡§æ‡§à‡§∏‡•Ä ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§® ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü‡•§ ‡§∏‡§≠‡•Ä ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú ‡§∏‡•ç‡§µ‡•Ä‡§ï‡•É‡§§‡•§'
                },
                'or': {
                    title: '‚úÖ AI KYC ‡¨Ø‡¨æ‡¨û‡≠ç‡¨ö ‡¨∏‡¨Æ‡≠ç‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£',
                    content: '‡¨¶‡¨≤‡¨ø‡¨≤: ‡¨Ü‡¨ß‡¨æ‡¨∞ ‡¨ï‡¨æ‡¨∞‡≠ç‡¨° ‡¨Ø‡¨æ‡¨û‡≠ç‡¨ö ‡¨π‡≠ã‡¨á‡¨õ‡¨ø<br>‡¨™‡¨∞‡¨ø‡¨ö‡≠ü: ‡¨∞‡¨æ‡¨ú‡≠á‡¨∂ ‡¨ï‡≠Å‡¨Æ‡¨æ‡¨∞ ‡¨∏‡¨ø‡¨Ç‡¨π<br>‡¨ñ‡≠á‡¨§ ‡¨∏‡≠ç‡¨•‡¨æ‡¨®: ‡¨ó‡≠ç‡¨∞‡¨æ‡¨Æ ‡¨ñ‡≠á‡¨§‡¨™‡≠Å‡¨∞, ‡¨ì‡¨°‡¨º‡¨ø‡¨∂‡¨æ (GPS ‡¨Ø‡¨æ‡¨û‡≠ç‡¨ö‡¨ø‡¨§)<br>‡¨ú‡≠à‡¨¨‡¨ø‡¨ï ‡¨™‡≠ç‡¨∞‡¨Æ‡¨æ‡¨£‡¨™‡¨§‡≠ç‡¨∞: ‡¨¨‡≠à‡¨ß<br>‡¨¨‡¨ø‡¨™‡¨¶ ‡¨∏‡≠ç‡¨ï‡≠ã‡¨∞: ‡¨ï‡¨Æ‡≠ç (0.2/10)<br><strong>‡¨Ö‡¨¨‡¨∏‡≠ç‡¨•‡¨æ: ‡¨Ö‡¨®‡≠Å‡¨Æ‡≠ã‡¨¶‡¨ø‡¨§ ‚úÖ</strong>',
                    speech: '‡¨ï‡≠á.‡≠±‡¨æ‡¨á.‡¨∏‡¨ø ‡¨Ø‡¨æ‡¨û‡≠ç‡¨ö ‡¨∏‡¨´‡¨≥‡¨§‡¨æ‡¨∞ ‡¨∏‡¨π‡¨ø‡¨§ ‡¨∏‡¨Æ‡≠ç‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£ ‡¨π‡≠ã‡¨á‡¨õ‡¨ø‡•§ ‡¨∏‡¨Æ‡¨∏‡≠ç‡¨§ ‡¨¶‡¨≤‡¨ø‡¨≤ ‡¨Ö‡¨®‡≠Å‡¨Æ‡≠ã‡¨¶‡¨ø‡¨§‡•§'
                }
            };

            const currentMsg = messages[currentLanguage] || messages['en'];

            document.getElementById('kyc-result').innerHTML = `
                <div class="success-box result-box">
                    <strong>${currentMsg.title}</strong><br>
                    ${currentMsg.content}
                </div>
            `;

            if (voiceMode) {
                speakText(currentMsg.speech);
            }
        }

        // Update existing functions to use enhanced versions
        function simulateKYC() {
            enhancedSimulateKYC();
        }

        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>